(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"+Iu4":function(t,e,n){"use strict";n.r(e);n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("QWBl"),n("pjDv"),n("J30X"),n("4mDm"),n("+2oP"),n("Rfxz"),n("DQNa"),n("sMBO"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("rB9j"),n("JfAA"),n("PKPk"),n("UxlC"),n("FZtP"),n("3bBZ");var r=n("RIqP"),i=n.n(r),a=n("lSNA"),o=n.n(a),s=(n("x0AG"),{name:"ScrollPane",data:function(){return{left:0}},computed:{scrollWrapper:function(){return this.$refs.scrollContainer.$refs.wrap}},methods:{handleScroll:function(t){var e=t.wheelDelta||40*-t.deltaY,n=this.scrollWrapper;n.scrollLeft=n.scrollLeft+e/4},moveToTarget:function(t){var e=this.$refs.scrollContainer.$el.offsetWidth,n=this.scrollWrapper,r=this.$parent.$refs.tag,i=null,a=null;if(r.length>0&&(i=r[0],a=r[r.length-1]),i===t)n.scrollLeft=0;else if(a===t)n.scrollLeft=n.scrollWidth-e;else{var o=r.findIndex((function(e){return e===t})),s=r[o-1],l=r[o+1],c=l.$el.offsetLeft+l.$el.offsetWidth+4,f=s.$el.offsetLeft-4;c>n.scrollLeft+e?n.scrollLeft=c-e:f<n.scrollLeft&&(n.scrollLeft=f)}}}}),l=(n("cSrW"),n("KHd+")),c=Object(l.a)(s,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-scrollbar",{ref:"scrollContainer",staticClass:"scroll-container",attrs:{vertical:!1},nativeOn:{wheel:function(e){return e.preventDefault(),t.handleScroll(e)}}},[t._t("default")],2)}),[],!1,null,"c24dea68",null).exports,f=n("tHMA"),u=n("33yf"),d=n.n(u);function p(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w={components:{ScrollPane:c},data:function(){return{visible:!1,top:0,left:0,selectedTag:{},affixTags:[]}},computed:{visitedViews:function(){return this.$store.state.tagsView.visitedViews.filter((function(t){if(!t.meta.tagsView)return t}))},routes:function(){return this.$store.state.permission.routers}},watch:{$route:function(){this.addTags(),this.moveToCurrentTag()},visible:function(t){t?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted:function(){this.initTags(),this.addTags()},methods:{generateTitleHaveId:f.b,isActive:function(t){return t.path===this.$route.path},filterAffixTags:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",r=[];return t.forEach((function(t){if(t.meta&&t.meta.affix){var a=d.a.resolve(n,t.path);r.push({fullPath:a,path:a,name:t.name,meta:g({},t.meta)})}if(t.children){var o=e.filterAffixTags(t.children,t.path);o.length>=1&&(r=[].concat(i()(r),i()(o)))}})),r},initTags:function(){var t,e=p(this.affixTags=this.filterAffixTags(this.routes));try{for(e.s();!(t=e.n()).done;){var n=t.value;n.name&&this.$store.dispatch("tagsView/addVisitedView",n)}}catch(t){e.e(t)}finally{e.f()}},addTags:function(){return this.$route.name&&this.$store.dispatch("tagsView/addView",this.$route),!1},moveToCurrentTag:function(){var t=this,e=this.$refs.tag;this.$nextTick((function(){var n,r=p(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.to.path===t.$route.path){t.$refs.scrollPane.moveToTarget(i),i.to.fullPath!==t.$route.fullPath&&t.$store.dispatch("tagsView/updateVisitedView",t.$route);break}}}catch(t){r.e(t)}finally{r.f()}}))},refreshSelectedTag:function(t){var e=this;this.$store.dispatch("tagsView/delCachedView",t).then((function(){var n=t.fullPath;e.$nextTick((function(){e.$router.replace({path:"/redirect"+n})}))}))},closeSelectedTag:function(t){var e=this;this.$store.dispatch("tagsView/delView",t).then((function(n){var r=n.visitedViews;e.isActive(t)&&e.toLastView(r,t)}))},closeOthersTags:function(){var t=this;this.$router.push(this.selectedTag),this.$store.dispatch("tagsView/delOthersViews",this.selectedTag).then((function(){t.moveToCurrentTag()}))},closeAllTags:function(t){var e=this;this.$store.dispatch("tagsView/delAllViews").then((function(n){var r=n.visitedViews;e.affixTags.some((function(e){return e.path===t.path}))||e.toLastView(r,t)}))},toLastView:function(t,e){var n=t.slice(-1)[0];n?this.$router.push(n):"Dashboard"===e.name?this.$router.replace({path:"/redirect"+e.fullPath}):this.$router.push("/")},openMenu:function(t,e){var n=this.$el.getBoundingClientRect().left,r=this.$el.offsetWidth-105,i=e.clientX-n+15;this.left=i>r?r:i,this.top=e.clientY,this.visible=!0,this.selectedTag=t},closeMenu:function(){this.visible=!1}}},b=(n("WZpT"),n("5I69"),Object(l.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tags-view-container",attrs:{id:"tags-view-container"}},[n("scroll-pane",{ref:"scrollPane",staticClass:"tags-view-wrapper"},t._l(t.visitedViews,(function(e){return n("router-link",{key:e.path,ref:"tag",refInFor:!0,staticClass:"tags-view-item",attrs:{to:{path:e.path,query:e.query,fullPath:e.fullPath},tag:"span",exact:""},nativeOn:{mouseup:function(n){return"button"in n&&1!==n.button?null:t.closeSelectedTag(e)},contextmenu:function(n){return n.preventDefault(),t.openMenu(e,n)}}},[t._v("\n      "+t._s(t.generateTitleHaveId(e))+"\n      "),e.meta.affix?t._e():n("span",{staticClass:"el-icon-close",on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.closeSelectedTag(e)}}})])})),1),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"contextmenu",style:{left:t.left+"px",top:t.top+"px"}},[n("li",{on:{click:function(e){return t.refreshSelectedTag(t.selectedTag)}}},[t._v("\n      "+t._s(t.$t("tagsView.refresh"))+"\n    ")]),t._v(" "),t.selectedTag.meta&&t.selectedTag.meta.affix?t._e():n("li",{on:{click:function(e){return t.closeSelectedTag(t.selectedTag)}}},[t._v("\n      "+t._s(t.$t("tagsView.close"))+"\n    ")]),t._v(" "),n("li",{on:{click:t.closeOthersTags}},[t._v(t._s(t.$t("tagsView.closeOthers")))]),t._v(" "),n("li",{on:{click:function(e){return t.closeAllTags(t.selectedTag)}}},[t._v(t._s(t.$t("tagsView.closeAll")))])])],1)}),[],!1,null,"2941e5fb",null));e.default=b.exports},"+gqw":function(t,e,n){(e=n("JPst")(!1)).push([t.i,".scroll-container[data-v-c24dea68] {\n  white-space: nowrap;\n  position: relative;\n  overflow: hidden;\n  width: 100%;\n}\n.scroll-container[data-v-c24dea68]  .el-scrollbar__bar {\n  bottom: 0px;\n}\n.scroll-container[data-v-c24dea68]  .el-scrollbar__wrap {\n  height: 49px;\n}",""]),t.exports=e},"+wz1":function(t,e,n){var r=n("Yag7");"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,i);r.locals&&(t.exports=r.locals)},"0yQe":function(t,e,n){(e=n("JPst")(!1)).push([t.i,".tags-view-wrapper .tags-view-item .el-icon-close {\n  width: 16px;\n  height: 16px;\n  vertical-align: 2px;\n  border-radius: 50%;\n  text-align: center;\n  transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n  transform-origin: 100% 50%;\n}\n.tags-view-wrapper .tags-view-item .el-icon-close:before {\n  transform: scale(0.6);\n  display: inline-block;\n  vertical-align: -3px;\n}\n.tags-view-wrapper .tags-view-item .el-icon-close:hover {\n  background-color: #b4bccc;\n  color: #fff;\n}",""]),t.exports=e},"1Gx4":function(t,e,n){var r=n("+gqw");"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,i);r.locals&&(t.exports=r.locals)},"5I69":function(t,e,n){"use strict";n("H+N6")},"H+N6":function(t,e,n){var r=n("0yQe");"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,i);r.locals&&(t.exports=r.locals)},WZpT:function(t,e,n){"use strict";n("+wz1")},Yag7:function(t,e,n){(e=n("JPst")(!1)).push([t.i,'.tags-view-container[data-v-2941e5fb] {\n  height: 34px;\n  width: 100%;\n  background: #fff;\n  border-bottom: 1px solid #d8dce5;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12), 0 0 3px 0 rgba(0, 0, 0, 0.04);\n}\n.tags-view-container .tags-view-wrapper .tags-view-item[data-v-2941e5fb] {\n  display: inline-block;\n  position: relative;\n  cursor: pointer;\n  height: 26px;\n  line-height: 26px;\n  border: 1px solid #d8dce5;\n  color: #495060;\n  background: #fff;\n  padding: 0 8px;\n  font-size: 12px;\n  margin-left: 5px;\n  margin-top: 4px;\n}\n.tags-view-container .tags-view-wrapper .tags-view-item[data-v-2941e5fb]:first-of-type {\n  margin-left: 15px;\n}\n.tags-view-container .tags-view-wrapper .tags-view-item[data-v-2941e5fb]:last-of-type {\n  margin-right: 15px;\n}\n.tags-view-container .tags-view-wrapper .tags-view-item.active[data-v-2941e5fb] {\n  background-color: #42b983;\n  color: #fff;\n  border-color: #42b983;\n}\n.tags-view-container .tags-view-wrapper .tags-view-item.active[data-v-2941e5fb]::before {\n  content: "";\n  background: #fff;\n  display: inline-block;\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  position: relative;\n  margin-right: 2px;\n}\n.tags-view-container .contextmenu[data-v-2941e5fb] {\n  margin: 0;\n  background: #fff;\n  z-index: 3000;\n  position: absolute;\n  list-style-type: none;\n  padding: 5px 0;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 400;\n  color: #333;\n  box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, 0.3);\n}\n.tags-view-container .contextmenu li[data-v-2941e5fb] {\n  margin: 0;\n  padding: 7px 16px;\n  cursor: pointer;\n}\n.tags-view-container .contextmenu li[data-v-2941e5fb]:hover {\n  background: #eee;\n}',""]),t.exports=e},cSrW:function(t,e,n){"use strict";n("1Gx4")},x0AG:function(t,e,n){"use strict";var r=n("I+eb"),i=n("tycR").findIndex,a=n("RNIs"),o=n("rkAj"),s=!0,l=o("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!l},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("findIndex")}}]);