(self.webpackChunk=self.webpackChunk||[]).push([[301],{63349:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.r(t),n.d(t,{default:()=>r})},6610:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,{default:()=>r})},5991:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t),n.d(t,{default:()=>i})},77608:(e,t,n)=>{"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t),n.d(t,{default:()=>r})},10379:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(14665);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,r.default)(e,t)}},46070:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(90484),i=n(63349);function o(e,t){return!t||"object"!==(0,r.default)(t)&&"function"!=typeof t?(0,i.default)(e):t}},14665:(e,t,n)=>{"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t),n.d(t,{default:()=>r})},76438:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});n(9653);var r=n(49938);const i={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:25},pageSizes:{type:Array,default:function(){return[10,25,50,100]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1},scrollTo:{type:Number,default:0}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&(0,r.scrollTo)(this.scrollTo,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&(0,r.scrollTo)(this.scrollTo,800)}}}},82278:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});n(47941),n(82526),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(69070),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(79753),n(47042),n(68309),n(91038),n(69826),n(5212),n(23157),n(21249),n(19601),n(92222),n(34553),n(40561);var r=n(96156),i=n(92137),o=n(87757),s=n.n(o),a=n(26470),l=n.n(a),u=n(53200),c=n(22426),d=n(62069),f=n(64080),m=n(27630),p=n(1116),h=n(65651),g=n(30708);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=new u.default("permissions"),R=new c.default;const k={components:{Pagination:h.default},directives:{permission:d.default,role:f.default},data:function(){return{loading:!1,loadingPermission:!1,currentRoleId:0,permissionId:0,dialogUpdateRoleVisible:!1,dialogCreateRoleVisible:!1,dialogCreatePermissionVisible:!1,routes:[],roles:[],permissions:[],menuPermissions:[],otherPermissions:[],permissionProps:{children:"children",label:"name",disabled:"disabled"},formRole:{name:"",description:""},formPermission:{name:"",description:""},query:{page:1,limit:25,keyword:""},total:0}},computed:{superAdmin:function(){return this.$store.state.settings.superAdmin},currentRole:function(){var e=this,t=this.roles.find((function(t){return t.id===e.currentRoleId}));return void 0===t?{name:"",permissions:[]}:t},rolePermissions:function(){return this.classifyPermissions(this.currentRole.permissions).all},roleMenuPermissions:function(){return this.classifyPermissions(this.currentRole.permissions).menu},roleOtherPermissions:function(){return this.classifyPermissions(this.currentRole.permissions).other},routesData:function(){return this.routes},roleRules:function(){var e=this;return{name:[{validator:function(t,n,r){return n?e.roles.some((function(t){return t.name===n&&t.id!==e.currentRoleId}))?r(new Error("Role exist!")):void r():r(new Error(e.$t("validation.required",{attribute:"Role"})))},trigger:["blur","change"]}]}},permissionRules:function(){var e=this;return{name:[{validator:function(t,n,r){return n?e.permissions.some((function(t){return t.name===n&&t.id!==e.permissionId}))?r(new Error("Permission exist!")):void r():r(new Error(e.$t("validation.required",{attribute:"Permission"})))},trigger:["blur","change"]}]}}},created:function(){this.getRoles(),this.getPermissions(),this.getRoutes()},methods:{checkPermission:m.default,checkRole:p.default,getRoutes:function(){var e=this;return(0,i.default)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.routes=e.generateRoutes(g.asyncRouterMap);case 1:case"end":return t.stop()}}),t)})))()},generateRoutes:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",r=[],i=y(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(!o.hidden){var s=this.onlyOneShowingChild(o.children,o);o.children&&s&&!o.alwaysShow&&(o=s);var a={path:l().resolve(n,o.path),name:o.meta&&o.meta.title};o.children&&(a.children=this.generateRoutes(o.children,a.path)),r.push(a)}}}catch(e){i.e(e)}finally{i.f()}return r},getRoles:function(){var e=this;this.loading=!0,R.list().then((function(t){e.roles=t.data.data,e.loading=!1}))},getPermissions:function(){var e=this;this.loadingPermission=!0,P.list(this.query).then((function(t){var n=t.data.data,r=e.classifyPermissions(n),i=r.all,o=r.menu,s=r.other;e.total=t.data.meta.total,e.permissions=i,e.menuPermissions=o,e.otherPermissions=s,e.loadingPermission=!1}))},classifyPermissions:function(e){var t=this,n=[],r=[],i=[];return e.forEach((function(e){var o=e.name;n.push(e),o.startsWith("view menu")?r.push(t.normalizeMenuPermission(e)):i.push(t.normalizePermission(e))})),{all:n,menu:r,other:i}},normalizeMenuPermission:function(e){return{id:e.id,name:e.name.substring(10)}},normalizePermission:function(e){return{id:e.id,name:e.name,disabled:!(0,p.default)([this.superAdmin])&&"manage permission"===e.name}},permissionKeys:function(e){return e.map((function(e){return e.id}))},permissionName:function(e){return e.map((function(e){return e.name}))},handleEditRolePermissions:function(e){var t=this;this.resetFormRole(),this.dialogUpdateRoleVisible=!0,this.currentRoleId=e,this.formRole=Object.assign({},this.currentRole),this.$nextTick((function(){t.$refs.menuPermissions.setCheckedKeys(t.permissionName(t.roleMenuPermissions)),t.$refs.otherPermissions.setCheckedKeys(t.permissionKeys(t.roleOtherPermissions))}))},updateRolePermission:function(e){var t=this,n={menu:this.$refs.menuPermissions.getCheckedKeys(),other:this.$refs.otherPermissions.getCheckedKeys()};this.$refs[e].validate((function(e){e&&R.update(t.currentRole.id,{permissions:n,role:t.formRole}).then((function(e){t.$message({message:"Role "+t.$t("messages.update"),type:"success",duration:5e3}),t.dialogUpdateRoleVisible=!1,t.getRoles(),t.getPermissions()}))}))},showCreateRole:function(){this.resetFormRole(),this.dialogCreateRoleVisible=!0},createRole:function(e){var t=this;this.$refs[e].validate((function(n){n&&R.store(t.formRole).then((function(n){var r=n.data.data;t.roles.push(r),t.$notify({title:t.$t("messages.update"),dangerouslyUseHTMLString:!0,message:"\n                  <div>Role name: ".concat(t.formRole.name,"</div>\n                  <div>Description: ").concat(t.formRole.description,"</div>\n                "),type:"success"}),t.$refs[e].resetFields()}))}))},handleDeleteRole:function(e,t){var n=this;this.$confirm(this.$t("messages.delete_confirm",{attribute:"[".concat(t,"]")}),this.$t("messages.warning"),{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){R.destroy(e).then((function(t){var r=n.roles.findIndex((function(t){return t.id===e}));n.roles.splice(r,1),n.$notify({title:"Success",message:n.$t("messages.delete"),type:"success"})}))}))},showCreatePermission:function(){this.dialogCreatePermissionVisible=!0,this.permissionId=0,this.resetFormPermission()},createPermission:function(e){var t=this;this.$refs[e].validate((function(n){n&&P.store(t.formPermission).then((function(){t.$notify({title:t.$t("messages.update"),dangerouslyUseHTMLString:!0,message:"\n                  <div>Role name: ".concat(t.formPermission.name,"</div>\n                  <div>Description: ").concat(t.formPermission.description,"</div>\n                "),type:"success"}),t.getPermissions(),t.$refs[e].resetFields()}))}))},handleDeletePermission:function(e,t){var n=this;this.$confirm(this.$t("messages.delete_confirm",{attribute:"[".concat(t,"]")}),this.$t("messages.warning"),{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){P.destroy(e).then((function(){n.$notify({title:"Success",message:n.$t("messages.delete"),type:"success"}),n.getPermissions()}))}))},handleEditPermissions:function(e){this.permissionId=e,this.dialogCreatePermissionVisible=!0;var t=this.permissions.find((function(t){return t.id===e}));this.formPermission=Object.assign({},t)},updatePermission:function(e){var t=this;this.$refs[e].validate((function(e){e&&P.update(t.permissionId,t.formPermission).then((function(){t.$message({message:"Permissions "+t.$t("messages.update"),type:"success",duration:5e3}),t.dialogCreatePermissionVisible=!1,t.getPermissions()}))}))},onlyOneShowingChild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=null,r=e.filter((function(e){return!e.hidden}));return 1===r.length?((n=r[0]).path=l().resolve(t.path,n.path),n):0===r.length&&(n=b(b({},t),{},{path:"",noShowingChildren:!0}))},resetFormRole:function(){this.formRole={name:"",description:""}},resetFormPermission:function(){this.formPermission={name:"",description:""}}}}},53200:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(6610),i=n(5991),o=n(58123),s=function(){function e(t){(0,r.default)(this,e),this.uri=t}return(0,i.default)(e,[{key:"list",value:function(e){return(0,o.default)({url:this.uri,method:"get",params:e})}},{key:"get",value:function(e){return(0,o.default)({url:this.uri+"/"+e,method:"get"})}},{key:"store",value:function(e){return(0,o.default)({url:this.uri,method:"post",data:e})}},{key:"update",value:function(e,t){return(0,o.default)({url:this.uri+"/"+e,method:"put",data:t})}},{key:"destroy",value:function(e){return(0,o.default)({url:this.uri+"/"+e,method:"delete"})}}]),e}()},22426:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});n(12419);var r=n(6610),i=n(10379),o=n(46070),s=n(77608);function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}var l=function(e){(0,i.default)(n,e);var t=a(n);function n(){return(0,r.default)(this,n),t.call(this,"roles")}return n}(n(53200).default)},64080:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(20644),i=function(e){e.directive("role",r.default)};window.Vue&&(window.role=r.default,Vue.use(i)),r.default.install=i;const o=r.default},20644:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});n(5212),n(26699),n(32023);var r=n(9298);const i={inserted:function(e,t,n){var i=t.value,o=r.default.getters&&r.default.getters.roles;if(!(i&&i instanceof Array&&i.length>0))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");var s=i;o.some((function(e){return s.includes(e)}))||e.parentNode&&e.parentNode.removeChild(e)}}},27630:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});n(26699),n(32023),n(5212);var r=n(9298);function i(e){if(e&&e instanceof Array&&e.length>0){var t=r.default.getters&&r.default.getters.permissions,n=r.default.getters&&r.default.getters.roles,i=e;return!!n.includes(r.default.state.settings.superAdmin)||t.some((function(e){return i.includes(e)}))}return console.error("Need permissions! Like v-permission=\"['manage permission','edit article']\""),!1}},1116:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});n(5212),n(26699),n(32023);var r=n(9298);function i(e){if(e&&e instanceof Array&&e.length>0){var t=r.default.getters&&r.default.getters.roles,n=e;return!!t.some((function(e){return n.includes(e)}))}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}},49938:(e,t,n)=>{"use strict";n.r(t),n.d(t,{scrollTo:()=>i});n(32564);Math.easeInOutQuad=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t};var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function i(e,t,n){var i=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,o=e-i,s=0;t=void 0===t?500:t;!function e(){s+=20;var a,l=Math.easeInOutQuad(s,i,o,t);a=l,document.documentElement.scrollTop=a,document.body.parentNode.scrollTop=a,document.body.scrollTop=a,s<t?r(e):n&&"function"==typeof n&&n()}()}},27065:(e,t,n)=>{"use strict";var r=n(13099),i=n(70111),o=[].slice,s={},a=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("C,a","return new C("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=o.call(arguments,1),s=function(){var r=n.concat(o.call(arguments));return this instanceof s?a(t,r.length,r):t.apply(e,r)};return i(t.prototype)&&(s.prototype=t.prototype),s}},34553:(e,t,n)=>{"use strict";var r=n(82109),i=n(42092).findIndex,o=n(51223),s="findIndex",a=!0;s in[]&&Array(1).findIndex((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)},69826:(e,t,n)=>{"use strict";var r=n(82109),i=n(42092).find,o=n(51223),s="find",a=!0;s in[]&&Array(1).find((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)},12419:(e,t,n)=>{var r=n(82109),i=n(35005),o=n(13099),s=n(19670),a=n(70111),l=n(70030),u=n(27065),c=n(47293),d=i("Reflect","construct"),f=c((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),m=!c((function(){d((function(){}))})),p=f||m;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){o(e),s(t);var n=arguments.length<3?e:o(arguments[2]);if(m&&!f)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var i=n.prototype,c=l(a(i)?i:Object.prototype),p=Function.apply.call(e,c,t);return a(p)?p:c}})},62347:(e,t,n)=>{(t=n(23645)(!1)).push([e.id,".pagination-container[data-v-f0c38056]{background:#fff;padding:32px 16px}.pagination-container[data-v-f0c38056]  .el-input{width:120px}.pagination-container.hidden[data-v-f0c38056]{display:none}",""]),e.exports=t},26470:(e,t,n)=>{"use strict";var r=n(34155);function i(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,t){for(var n,r="",i=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){-1===l?(r="",i=0):i=(r=r.slice(0,l)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=a,s=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,a):r=e.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}var s={resolve:function(){for(var e,t="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var a;s>=0?a=arguments[s]:(void 0===e&&(e=r.cwd()),a=e),i(a),0!==a.length&&(t=a+"/"+t,n=47===a.charCodeAt(0))}return t=o(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(i(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=o(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return i(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];i(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":s.normalize(e)},relative:function(e,t){if(i(e),i(t),e===t)return"";if((e=s.resolve(e))===(t=s.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var r=e.length,o=r-n,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var l=t.length-a,u=o<l?o:l,c=-1,d=0;d<=u;++d){if(d===u){if(l>u){if(47===t.charCodeAt(a+d))return t.slice(a+d+1);if(0===d)return t.slice(a+d)}else o>u&&(47===e.charCodeAt(n+d)?c=d:0===d&&(c=0));break}var f=e.charCodeAt(n+d);if(f!==t.charCodeAt(a+d))break;47===f&&(c=d)}var m="";for(d=n+c+1;d<=r;++d)d!==r&&47!==e.charCodeAt(d)||(0===m.length?m+="..":m+="/..");return m.length>0?m+t.slice(a+c):(a+=c,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(i(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!o){r=s;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');i(e);var n,r=0,o=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,l=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!s){r=n+1;break}}else-1===l&&(s=!1,l=n+1),a>=0&&(u===t.charCodeAt(a)?-1==--a&&(o=n):(a=-1,o=l))}return r===o?o=l:-1===o&&(o=e.length),e.slice(r,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!s){r=n+1;break}}else-1===o&&(s=!1,o=n+1);return-1===o?"":e.slice(r,o)},extname:function(e){i(e);for(var t=-1,n=0,r=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47!==l)-1===r&&(o=!1,r=a+1),46===l?-1===t?t=a:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){n=a+1;break}}return-1===t||-1===r||0===s||1===s&&t===r-1&&t===n+1?"":e.slice(t,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+e+r:r}("/",e)},parse:function(e){i(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,r=e.charCodeAt(0),o=47===r;o?(t.root="/",n=1):n=0;for(var s=-1,a=0,l=-1,u=!0,c=e.length-1,d=0;c>=n;--c)if(47!==(r=e.charCodeAt(c)))-1===l&&(u=!1,l=c+1),46===r?-1===s?s=c:1!==d&&(d=1):-1!==s&&(d=-1);else if(!u){a=c+1;break}return-1===s||-1===l||0===d||1===d&&s===l-1&&s===a+1?-1!==l&&(t.base=t.name=0===a&&o?e.slice(1,l):e.slice(a,l)):(0===a&&o?(t.name=e.slice(1,s),t.base=e.slice(1,l)):(t.name=e.slice(a,s),t.base=e.slice(a,l)),t.ext=e.slice(s,l)),a>0?t.dir=e.slice(0,a-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,e.exports=s},65186:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(93379),i=n.n(r),o=n(62347),s=n.n(o),a={insert:"head",singleton:!1};i()(s(),a);const l=s().locals||{}},65651:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(47412),i=n(56037),o={};for(const e in i)"default"!==e&&(o[e]=()=>i[e]);n.d(t,o);n(95897);const s=(0,n(51900).default)(i.default,r.render,r.staticRenderFns,!1,null,"f0c38056",null).exports},33301:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(72725),i=n(79299),o={};for(const e in i)"default"!==e&&(o[e]=()=>i[e]);n.d(t,o);const s=(0,n(51900).default)(i.default,r.render,r.staticRenderFns,!1,null,null,null).exports},56037:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(76438),i={};for(const e in r)"default"!==e&&(i[e]=()=>r[e]);n.d(t,i);const o=r.default},79299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(82278),i={};for(const e in r)"default"!==e&&(i[e]=()=>r[e]);n.d(t,i);const o=r.default},95897:(e,t,n)=>{"use strict";n.r(t);var r=n(65186),i={};for(const e in r)"default"!==e&&(i[e]=()=>r[e]);n.d(t,i)},47412:(e,t,n)=>{"use strict";n.r(t);var r=n(73331),i={};for(const e in r)"default"!==e&&(i[e]=()=>r[e]);n.d(t,i)},72725:(e,t,n)=>{"use strict";n.r(t);var r=n(20260),i={};for(const e in r)"default"!==e&&(i[e]=()=>r[e]);n.d(t,i)},73331:(e,t,n)=>{"use strict";n.r(t),n.d(t,{render:()=>r,staticRenderFns:()=>i});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[]},20260:(e,t,n)=>{"use strict";n.r(t),n.d(t,{render:()=>r,staticRenderFns:()=>i});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-col",{attrs:{span:24}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("h3",[e._v(e._s(e.$t("route.role_permission")))])]),e._v(" "),n("div",{staticClass:"tw-text-right tw-mb-8"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.showCreateRole()}}},[e._v("\n          Role\n        ")])],1),e._v(" "),n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"highlight-current-row":"",fit:"",border:"",data:e.roles}},[n("el-table-column",{attrs:{type:"index",align:"center",label:e.$t("table.rolePermission.id"),width:"50px"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("table.rolePermission.name")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v("\n              "+e._s(n.name)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{"header-align":"center",label:e.$t("table.rolePermission.description")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v("\n              "+e._s(n.description)+"\n            ")]}}])}),e._v(" "),e.checkPermission(["manage permission"])?n("el-table-column",{attrs:{align:"center",label:"Actions"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.name===e.superAdmin&&e.checkRole([e.superAdmin])?n("div",[n("el-button",{attrs:{type:"success",round:"",icon:"el-icon-view",size:"small"},on:{click:function(t){return e.handleEditRolePermissions(r.id)}}})],1):e._e(),e._v(" "),r.name!==e.superAdmin?n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(t){return e.handleEditRolePermissions(r.id)}}},[e._v("\n                  Edit permission\n                ")]),e._v(" "),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(t){return e.handleDeleteRole(r.id,r.name)}}})],1):e._e()]}}],null,!1,3116755374)}):e._e()],1),e._v(" "),n("div",{staticClass:"tw-my-8 tw-text-right"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.showCreatePermission()}}},[e._v("\n            Permission\n          ")])],1),e._v(" "),n("el-input",{staticClass:"tw-w-64 tw-mb-4",attrs:{placeholder:e.$t("table.rolePermission.name")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getPermissions(t)}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}}),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"highlight-current-row":"",fit:"",border:"",data:e.permissions}},[n("el-table-column",{attrs:{type:"index",align:"center",label:e.$t("table.rolePermission.id"),width:"50px"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:e.$t("table.rolePermission.name")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v("\n              "+e._s(n.name)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{"header-align":"center",label:e.$t("table.rolePermission.description")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v("\n              "+e._s(n.description)+"\n            ")]}}])}),e._v(" "),e.checkPermission(["manage permission"])?n("el-table-column",{attrs:{align:"center",label:"Actions"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return"manage permission"!==r.name?[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(t){return e.handleEditPermissions(r.id)}}}),e._v(" "),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(t){return e.handleDeletePermission(r.id,r.name)}}})]:void 0}}],null,!0)}):e._e()],1),e._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.getPermissions}}),e._v(" "),n("el-dialog",{attrs:{title:"["+e.currentRole.name+"] Edit Permission",visible:e.dialogUpdateRoleVisible,center:""},on:{"update:visible":function(t){e.dialogUpdateRoleVisible=t}}},[n("div",[n("el-form",{ref:"formRole",attrs:{model:e.formRole,rules:e.roleRules,"label-width":"110px","label-position":"left"}},[n("el-form-item",{attrs:{required:"",label:"Role name",prop:"name"}},[n("el-input",{attrs:{autofocus:""},model:{value:e.formRole.name,callback:function(t){e.$set(e.formRole,"name",t)},expression:"formRole.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Description",prop:"description"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.formRole.description,callback:function(t){e.$set(e.formRole,"description",t)},expression:"formRole.description"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"tw-flex tw-justify-between tw-items-start"},[n("el-form",{staticClass:"tw-w-6/12",attrs:{model:e.currentRole,"label-width":"80px","label-position":"top"}},[n("el-form-item",{attrs:{label:"Menus"}},[n("el-tree",{ref:"menuPermissions",staticClass:"permission-tree",attrs:{data:e.routesData,props:e.permissionProps,"default-checked-keys":e.permissionName(e.roleMenuPermissions),"show-checkbox":"","node-key":"name"}})],1)],1),e._v(" "),n("el-form",{staticClass:"tw-w-6/12",attrs:{model:e.currentRole,"label-width":"80px","label-position":"top"}},[n("el-form-item",{attrs:{label:"Permissions"}},[n("el-tree",{ref:"otherPermissions",staticClass:"permission-tree",attrs:{data:e.otherPermissions,"default-checked-keys":e.permissionKeys(e.roleOtherPermissions),props:e.permissionProps,"show-checkbox":"","node-key":"id"}})],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogUpdateRoleVisible=!1}}},[e._v("\n              Cancel\n            ")]),e._v(" "),e.currentRole.name!==e.superAdmin?n("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:function(t){return e.updateRolePermission("formRole")}}},[e._v("\n              "+e._s(e.$t("button.update"))+"\n            ")]):e._e()],1)]),e._v(" "),n("el-dialog",{attrs:{title:"Create role",visible:e.dialogCreateRoleVisible,center:""},on:{"update:visible":function(t){e.dialogCreateRoleVisible=t}}},[n("div",{staticClass:"tw-flex tw-justify-between tw-items-start"},[n("el-form",{ref:"formRole",attrs:{model:e.formRole,rules:e.roleRules,"label-width":"110px","label-position":"left"}},[n("el-form-item",{attrs:{required:"",label:"Role name",error:e.errors.name&&e.errors.name[0],prop:"name"}},[n("el-input",{attrs:{autofocus:"",placeholder:"Ex: admin"},model:{value:e.formRole.name,callback:function(t){e.$set(e.formRole,"name",t)},expression:"formRole.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Description",prop:"description"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.formRole.description,callback:function(t){e.$set(e.formRole,"description",t)},expression:"formRole.description"}})],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogCreateRoleVisible=!1}}},[e._v("\n              Cancel\n            ")]),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.createRole("formRole")}}},[e._v("\n              "+e._s(e.$t("button.create"))+"\n            ")])],1)]),e._v(" "),n("el-dialog",{attrs:{title:"Create permission",visible:e.dialogCreatePermissionVisible,center:""},on:{"update:visible":function(t){e.dialogCreatePermissionVisible=t}}},[n("div",[n("el-form",{ref:"formPermission",attrs:{model:e.formPermission,rules:e.permissionRules,"label-width":"110px","label-position":"left"}},[n("el-form-item",{attrs:{required:"",label:"Permission",error:e.errors.name&&e.errors.name[0],prop:"name"}},[n("el-input",{attrs:{autofocus:"",placeholder:"Ex: role_permission"},model:{value:e.formPermission.name,callback:function(t){e.$set(e.formPermission,"name",t)},expression:"formPermission.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Description",prop:"description"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.formPermission.description,callback:function(t){e.$set(e.formPermission,"description",t)},expression:"formPermission.description"}})],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogCreatePermissionVisible=!1}}},[e._v("\n              Cancel\n            ")]),e._v(" "),0==+e.permissionId?n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.createPermission("formPermission")}}},[e._v("\n              "+e._s(e.$t("button.create"))+"\n            ")]):n("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:function(t){return e.updatePermission("formPermission")}}},[e._v("\n              "+e._s(e.$t("button.update"))+"\n            ")])],1)])],1)])],1)],1)},i=[]}}]);