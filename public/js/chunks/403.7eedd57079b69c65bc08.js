(self.webpackChunk=self.webpackChunk||[]).push([[403],{63349:(t,e,r)=>{"use strict";function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}r.r(e),r.d(e,{default:()=>o})},6610:(t,e,r)=>{"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.r(e),r.d(e,{default:()=>o})},5991:(t,e,r)=>{"use strict";function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}r.r(e),r.d(e,{default:()=>n})},77608:(t,e,r)=>{"use strict";function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r.r(e),r.d(e,{default:()=>o})},10379:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var o=r(14665);function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&(0,o.default)(t,e)}},46070:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var o=r(90484),n=r(63349);function a(t,e){return!e||"object"!==(0,o.default)(e)&&"function"!=typeof e?(0,n.default)(t):e}},14665:(t,e,r)=>{"use strict";function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}r.r(e),r.d(e,{default:()=>o})},75357:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>d});r(12419);var o=r(6610),n=r(5991),a=r(10379),l=r(46070),s=r(77608),i=r(43753);function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=(0,s.default)(t);if(e){var n=(0,s.default)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return(0,l.default)(this,r)}}var d=function(t){(0,a.default)(r,t);var e=c(r);function r(){return(0,o.default)(this,r),e.call(this,"generators")}return(0,n.default)(r,[{key:"checkModel",value:function(t){return(0,i.default)({url:"/generators/check-model",method:"get",params:{name:t}})}},{key:"checkColumn",value:function(t,e){return(0,i.default)({url:"/generators/check-column",method:"get",params:{table:t,column:e}})}},{key:"getModels",value:function(t){return(0,i.default)({url:"/generators/get-models",method:"get",params:{model:t}})}},{key:"getAllModels",value:function(){return(0,i.default)({url:"/generators/get-all-models",method:"get"})}},{key:"getColumns",value:function(t){return(0,i.default)({url:"/generators/get-columns",method:"get",params:{table:t}})}},{key:"generateRelationship",value:function(t){return(0,i.default)({url:"/generators/relationship",method:"post",data:t})}},{key:"generateDiagram",value:function(t){return(0,i.default)({url:"/generators/diagram",method:"get",params:{model:t}})}}]),r}(r(27427).default)},27427:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>l});var o=r(6610),n=r(5991),a=r(43753),l=function(){function t(e){(0,o.default)(this,t),this.uri=e}return(0,n.default)(t,[{key:"list",value:function(t){return(0,a.default)({url:this.uri,method:"get",params:t})}},{key:"get",value:function(t){return(0,a.default)({url:this.uri+"/"+t,method:"get"})}},{key:"store",value:function(t){return(0,a.default)({url:this.uri,method:"post",data:t})}},{key:"update",value:function(t,e){return(0,a.default)({url:this.uri+"/"+t,method:"put",data:e})}},{key:"destroy",value:function(t){return(0,a.default)({url:this.uri+"/"+t,method:"delete"})}}]),t}()},53812:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});const o={name:"PreCodeTag",props:{content:{type:String,required:!1,default:""}}}},42654:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>m});var o=r(78927),n=r(92137),a=r(87757),l=r.n(a),s=(r(68309),r(34553),r(40561),r(26699),r(32023),r(92222),r(99584)),i=r(75357),c=r(68929),d=r.n(c),u=r(42933),f=r.n(u),p=new i.default;const m={components:{PreCodeTag:s.default},data:function(){return{loading:!1,loadingModel:!1,loadingDisplay:!1,dialogVisible:!1,options:["Search","Sort","Show"],relationshipOptions:["hasOne","hasMany","belongsToMany"],modelOptions:[],markdown:"# Relationship",displayColumns:[],displayColumns2:[],form:{model_current:"",relationship:"",model:"",column:"",column2:"",options:["Show"]},drawDiagram:[],modelCurrents:[]}},mounted:function(){var t=this;return(0,n.default)(l().mark((function e(){var r,n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.$route.params.id)){e.next=5;break}p.get(r).then((function(e){var r=e.data.data.model,o=JSON.parse(r);t.form.model_current=o.name,t.loadingModel=!0,p.getModels(r).then((function(e){t.loadingModel=!1;var r=e.data.data;t.modelOptions=r})).catch((function(){t.loadingModel=!1}))})),e.next=13;break;case 5:return t.loadingModel=!0,e.next=8,p.getAllModels();case 8:n=e.sent,a=n.data.data,t.modelCurrents=(0,o.default)(a),t.modelOptions=(0,o.default)(a),t.loadingModel=!1;case 13:case"end":return e.stop()}}),e)})))()},methods:{changeModelCurrent:function(){var t=this,e=this.modelCurrents.findIndex((function(e){return t.form.model_current===e}));this.modelOptions=(0,o.default)(this.modelCurrents),this.form.model="",this.modelOptions.splice(e,1)},diagram:function(){var t=this;p.generateDiagram(this.form.model_current).then((function(e){var r=e.data.data;t.drawDiagram=r}))},changeOptions:function(t){t.includes("Show")?"belongsToMany"===this.form.relationship?this.options=["Show","Search"]:this.options=["Search","Sort","Show"]:(this.form.options=[],this.options=["Show"])},createRelationship:function(){var t=this;this.loading=!0,p.generateRelationship(this.form).then((function(e){t.$message({showClose:!0,message:t.$t("messages.success"),type:"success"}),t.loading=!1,location.reload()})).catch((function(){t.loading=!1}))},replaceTemplate:function(t){var e=this,r="# Model ".concat(this.form.model_current,"\n      public function ").concat(d()(this.form.model),"() {\n        return $this->").concat(this.form.relationship,"(").concat(this.form.model,"::class);\n      }"),o="<br/>  # Model ".concat(this.form.model,"\n      public function ").concat(d()(this.form.model_current),"() {\n        return $this->belongsTo(").concat(this.form.model_current,"::class);\n      }");"belongsToMany"===this.form.relationship&&(o="<br/>  # Model ".concat(this.form.model,"\n      public function ").concat(d()(this.form.model_current),"() {\n        return $this->belongsToMany(").concat(this.form.model_current,"::class);\n      }"),o+="<br/>  # We will create a table ".concat(f()(this.form.model_current),"_").concat(f()(this.form.model))),o+="<br/>  # This is an example template",this.form.relationship&&this.form.model&&(this.markdown=r.concat(o)),"belongsToMany"===this.form.relationship?(this.options=["Show","Search"],this.form.options=["Show"]):(this.options=["Search","Sort","Show"],this.form.options=["Show"]),t&&(this.loadingDisplay=!0,p.getColumns(this.form.model_current).then((function(t){e.loadingDisplay=!1;var r=t.data.data;e.displayColumns=r})).catch((function(){e.loadingDisplay=!1})),p.getColumns(this.form.model).then((function(t){e.loadingDisplay=!1;var r=t.data.data;e.displayColumns2=r})).catch((function(){e.loadingDisplay=!1})))}}}},27065:(t,e,r)=>{"use strict";var o=r(13099),n=r(70111),a=[].slice,l={},s=function(t,e,r){if(!(e in l)){for(var o=[],n=0;n<e;n++)o[n]="a["+n+"]";l[e]=Function("C,a","return new C("+o.join(",")+")")}return l[e](t,r)};t.exports=Function.bind||function(t){var e=o(this),r=a.call(arguments,1),l=function(){var o=r.concat(a.call(arguments));return this instanceof l?s(e,o.length,o):e.apply(t,o)};return n(e.prototype)&&(l.prototype=e.prototype),l}},34553:(t,e,r)=>{"use strict";var o=r(82109),n=r(42092).findIndex,a=r(51223),l="findIndex",s=!0;l in[]&&Array(1).findIndex((function(){s=!1})),o({target:"Array",proto:!0,forced:s},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a(l)},12419:(t,e,r)=>{var o=r(82109),n=r(35005),a=r(13099),l=r(19670),s=r(70111),i=r(70030),c=r(27065),d=r(47293),u=n("Reflect","construct"),f=d((function(){function t(){}return!(u((function(){}),[],t)instanceof t)})),p=!d((function(){u((function(){}))})),m=f||p;o({target:"Reflect",stat:!0,forced:m,sham:m},{construct:function(t,e){a(t),l(e);var r=arguments.length<3?t:a(arguments[2]);if(p&&!f)return u(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var o=[null];return o.push.apply(o,e),new(c.apply(t,o))}var n=r.prototype,d=i(s(n)?n:Object.prototype),m=Function.apply.call(t,d,e);return s(m)?m:d}})},50807:(t,e,r)=>{(e=r(23645)(!1)).push([t.id,"pre[data-v-52a1f2be]{word-wrap:break-word;background-color:#fff;border:1px solid grey;border-left:12px solid #67c23a;border-radius:5px;font-size:1.5rem;max-width:700px;overflow:auto;padding:14px;white-space:pre;width:60vw}pre code[data-v-52a1f2be]{color:#dd6b20;font-family:Inconsolata,Monaco,Consolas,Andale Mono,Bitstream Vera Sans Mono,Courier New,Courier,monospace}",""]),t.exports=e},82016:(t,e,r)=>{(e=r(23645)(!1)).push([t.id,'.w-04-rem[data-v-4964b229]{width:.4rem}.draw-arrow-down[data-v-4964b229]{position:relative}.draw-arrow-down[data-v-4964b229]:before{border-left:.5rem solid transparent;border-right:.5rem solid transparent;border-top:1.9rem solid #5a67d8;bottom:-1rem;content:"";height:0;position:absolute;right:-.3rem;width:0}.error-danger[data-v-4964b229] input{border-color:#ff3860!important}.options[data-v-4964b229]{width:260px}.one[data-v-4964b229]:after{content:"1"}.one[data-v-4964b229]:after,.two[data-v-4964b229]:after{background-color:#5a67d8;border-radius:100%;color:#fff;height:20px;left:-8px;line-height:20px;position:absolute;text-align:center;top:14px;width:20px}.two[data-v-4964b229]:after{content:"2"}.three[data-v-4964b229]:after{content:"3"}.four[data-v-4964b229]:after,.three[data-v-4964b229]:after{background-color:#5a67d8;border-radius:100%;color:#fff;height:20px;left:-8px;line-height:20px;position:absolute;text-align:center;top:14px;width:20px}.four[data-v-4964b229]:after{content:"4"}.five[data-v-4964b229]:after{content:"5"}.five[data-v-4964b229]:after,.six[data-v-4964b229]:after{background-color:#5a67d8;border-radius:100%;color:#fff;height:20px;left:-8px;line-height:20px;position:absolute;text-align:center;top:14px;width:20px}.six[data-v-4964b229]:after{content:"6"}.equivalent[data-v-4964b229]:after{border-bottom:1.9rem solid #5a67d8;border-left:.5rem solid transparent;border-right:.5rem solid transparent;content:"";height:0;position:absolute;right:-.3rem;top:-1rem;width:0}',""]),t.exports=e},42933:(t,e,r)=>{var o=r(35393)((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));t.exports=o},4899:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>b});var o=r(93379),n=r.n(o),a=r(7795),l=r.n(a),s=r(90569),i=r.n(s),c=r(3565),d=r.n(c),u=r(19216),f=r.n(u),p=r(44589),m=r.n(p),h=r(50807),v=r.n(h),g={};for(const t in h)"default"!==t&&(g[t]=()=>h[t]);r.d(e,g);var w={};w.styleTagTransform=m(),w.setAttributes=d(),w.insert=i().bind(null,"head"),w.domAPI=l(),w.insertStyleElement=f();n()(v(),w);const b=v()&&v().locals?v().locals:void 0},71067:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>b});var o=r(93379),n=r.n(o),a=r(7795),l=r.n(a),s=r(90569),i=r.n(s),c=r(3565),d=r.n(c),u=r(19216),f=r.n(u),p=r(44589),m=r.n(p),h=r(82016),v=r.n(h),g={};for(const t in h)"default"!==t&&(g[t]=()=>h[t]);r.d(e,g);var w={};w.styleTagTransform=m(),w.setAttributes=d(),w.insert=i().bind(null,"head"),w.domAPI=l(),w.insertStyleElement=f();n()(v(),w);const b=v()&&v().locals?v().locals:void 0},99584:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>l});var o=r(50893),n=r(64988),a={};for(const t in n)"default"!==t&&(a[t]=()=>n[t]);r.d(e,a);r(90439);const l=(0,r(51900).default)(n.default,o.render,o.staticRenderFns,!1,null,"52a1f2be",null).exports},97403:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>l});var o=r(15199),n=r(62398),a={};for(const t in n)"default"!==t&&(a[t]=()=>n[t]);r.d(e,a);r(32739);const l=(0,r(51900).default)(n.default,o.render,o.staticRenderFns,!1,null,"4964b229",null).exports},64988:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var o=r(53812),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);r.d(e,n);const a=o.default},62398:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var o=r(42654),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);r.d(e,n);const a=o.default},90439:(t,e,r)=>{"use strict";r.r(e);var o=r(4899),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);r.d(e,n)},32739:(t,e,r)=>{"use strict";r.r(e);var o=r(71067),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);r.d(e,n)},50893:(t,e,r)=>{"use strict";r.r(e);var o=r(53819),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);r.d(e,n)},15199:(t,e,r)=>{"use strict";r.r(e);var o=r(32942),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);r.d(e,n)},53819:(t,e,r)=>{"use strict";r.r(e),r.d(e,{render:()=>o,staticRenderFns:()=>n});var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("pre",{staticClass:"code code-php"},[t._v("  "),r("code",{domProps:{innerHTML:t._s(t.content)}}),t._v("\n")])},n=[]},32942:(t,e,r)=>{"use strict";r.r(e),r.d(e,{render:()=>o,staticRenderFns:()=>n});var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-row",[r("el-col",{attrs:{span:24}},[r("el-card",[r("div",{staticClass:"tw-text-center",attrs:{slot:"header"},slot:"header"},[r("button",{staticClass:"\n            tw-hover:bg-green-600 tw-hover:text-white\n            tw-font-bold tw-border tw-rounded tw-border-green-600 tw-text-green-600 tw-bg-transparent tw-py-3 tw-px-4\n          ",on:{click:function(e){t.dialogVisible=!0}}},[r("svg-icon",{attrs:{"icon-class":"tree"}})],1)]),t._v(" "),r("section",{staticClass:"section"},[r("div",{staticClass:"tw-flex tw-flex-col tw-items-center"},[t.$route.params.id?[r("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v("\n              "+t._s(t.form.model_current)+"\n            ")])]:[r("el-select",{attrs:{filterable:"",placeholder:"Model current"},on:{change:function(e){return t.changeModelCurrent()}},model:{value:t.form.model_current,callback:function(e){t.$set(t.form,"model_current",e)},expression:"form.model_current"}},t._l(t.modelCurrents,(function(t,e){return r("el-option",{key:"model_current"+e,attrs:{label:t,value:t}})})),1)],t._v(" "),r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down one"}),t._v(" "),r("el-select",{class:{"error-danger":t.errors.relationship},attrs:{placeholder:"Relationship"},on:{change:function(e){return t.replaceTemplate("")}},model:{value:t.form.relationship,callback:function(e){t.$set(t.form,"relationship",e)},expression:"form.relationship"}},t._l(t.relationshipOptions,(function(t,e){return r("el-option",{key:"relationship_"+e,attrs:{label:t,value:t}})})),1),t._v(" "),t.errors.relationship?r("p",{staticClass:"help is-danger tw-text-lg"},[t._v("\n            "+t._s(t.errors.relationship[0])+"\n          ")]):t._e(),t._v(" "),r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down two"}),t._v(" "),r("el-select",{class:{"error-danger":t.errors.model},attrs:{loading:t.loadingModel,filterable:"",placeholder:"Model"},on:{change:function(e){return t.replaceTemplate("display")}},model:{value:t.form.model,callback:function(e){t.$set(t.form,"model",e)},expression:"form.model"}},t._l(t.modelOptions,(function(t,e){return r("el-option",{key:"model_"+e,attrs:{label:t,value:t}})})),1),t._v(" "),t.errors.model?r("p",{staticClass:"help is-danger tw-text-lg"},[t._v("\n            "+t._s(t.errors.model[0])+"\n          ")]):t._e(),t._v(" "),r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down three"}),t._v(" "),r("div",{staticClass:"tw-z-10"},[r("pre-code-tag",{attrs:{content:t.markdown}})],1),t._v(" "),r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down four"}),t._v(" "),r("el-select",{staticClass:"tw-z-10",class:{"error-danger":t.errors.column},attrs:{loading:t.loadingDisplay,filterable:"",placeholder:"Display Column"},model:{value:t.form.column,callback:function(e){t.$set(t.form,"column",e)},expression:"form.column"}},t._l(t.displayColumns,(function(t,e){return r("el-option",{key:"col_"+e,attrs:{label:t,value:t}})})),1),t._v(" "),"belongsToMany"===t.form.relationship?[r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down equivalent"}),t._v(" "),r("el-select",{class:{"error-danger":t.errors.column2},attrs:{loading:t.loadingDisplay,filterable:"",placeholder:"Display Column 2"},model:{value:t.form.column2,callback:function(e){t.$set(t.form,"column2",e)},expression:"form.column2"}},t._l(t.displayColumns2,(function(t,e){return r("el-option",{key:"col_"+e,attrs:{label:t,value:t}})})),1)]:t._e(),t._v(" "),t.errors.column?r("p",{staticClass:"help is-danger tw-text-lg"},[t._v("\n            "+t._s(t.errors.column[0])+"\n          ")]):t._e(),t._v(" "),r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down five"}),t._v(" "),r("el-select",{staticClass:"options",attrs:{multiple:"",placeholder:"Options"},on:{change:function(e){return t.changeOptions(t.form.options)}},model:{value:t.form.options,callback:function(e){t.$set(t.form,"options",e)},expression:"form.options"}},t._l(t.options,(function(t,e){return r("el-option",{key:"option_"+e,attrs:{label:t,value:t}})})),1),t._v(" "),r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down six"}),t._v(" "),r("el-tooltip",{attrs:{effect:"dark",content:t.$t("route.generator_relationship"),placement:"bottom"}},[r("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"tw-z-10",attrs:{type:"success",icon:"el-icon-check",circle:""},on:{click:function(e){return e.preventDefault(),t.createRelationship()}}})],1)],2),t._v(" "),r("div",{staticClass:"container is-fullhd"},[r("el-dialog",{attrs:{visible:t.dialogVisible,fullscreen:!0},on:{"update:visible":function(e){t.dialogVisible=e},open:t.diagram}},[r("div",{staticClass:"tw-text-center",attrs:{slot:"title"},slot:"title"},[r("h3",{staticClass:"title"},[t._v("Diagram "+t._s(t.$t("route.generator_relationship")))])]),t._v(" "),r("div",[r("div",{staticClass:"tree tw-text-center"},[r("ul",{staticClass:"tw-inline-block"},t._l(t.drawDiagram,(function(e,o){return r("li",{key:"diagram_"+o},[r("a",[t._v(t._s(e.model))]),t._v(" "),r("ul",{staticClass:"tw-flex"},t._l(e.data,(function(e,o){return r("li",{key:"itemDiagram_"+o},[r("a",[t._v(t._s(e.type))]),t._v(" "),r("ul",[r("li",[r("a",{staticClass:"tw-w-64"},[t._v(t._s(e.model))]),t._v(" "),e.table?r("ul",{class:{"has-mtm-parent":e.table}},[r("a",{staticClass:"tw-w-64"},[t._v(t._s(e.table))])]):t._e(),t._v(" "),r("ul",[r("li",[r("a",{class:{"has-mtm":e.table}},[t._v("\n                                  "+t._s(e.foreign_key)+"\n                                ")])]),t._v(" "),r("li",[r("a",{class:{"has-mtm":e.table}},[t._v("\n                                  "+t._s(e.local_key)+"\n                                ")])])])])])])})),0)])})),0)])])])],1)])])],1)],1)},n=[]}}]);