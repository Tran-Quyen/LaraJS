(self.webpackChunk=self.webpackChunk||[]).push([[585],{63349:(e,t,r)=>{"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.r(t),r.d(t,{default:()=>n})},6610:(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.r(t),r.d(t,{default:()=>n})},5991:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.r(t),r.d(t,{default:()=>i})},77608:(e,t,r)=>{"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t),r.d(t,{default:()=>n})},10379:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(14665);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,n.default)(e,t)}},46070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(90484),i=r(63349);function o(e,t){return!t||"object"!==(0,n.default)(t)&&"function"!=typeof t?(0,i.default)(e):t}},14665:(e,t,r)=>{"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r.r(t),r.d(t,{default:()=>n})},27427:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(6610),i=r(5991),o=r(43753),s=function(){function e(t){(0,n.default)(this,e),this.uri=t}return(0,i.default)(e,[{key:"list",value:function(e){return(0,o.default)({url:this.uri,method:"get",params:e})}},{key:"get",value:function(e){return(0,o.default)({url:this.uri+"/"+e,method:"get"})}},{key:"store",value:function(e){return(0,o.default)({url:this.uri,method:"post",data:e})}},{key:"update",value:function(e,t){return(0,o.default)({url:this.uri+"/"+e,method:"put",data:t})}},{key:"destroy",value:function(e){return(0,o.default)({url:this.uri+"/"+e,method:"delete"})}}]),e}()},44370:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});r(12419);var n=r(6610),i=r(10379),o=r(46070),s=r(77608);function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var i=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.default)(this,r)}}var l=function(e){(0,i.default)(r,e);var t=a(r);function r(){return(0,n.default)(this,r),t.call(this,"/permissions")}return r}(r(27427).default)},76670:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});r(12419);var n=r(6610),i=r(10379),o=r(46070),s=r(77608);function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var i=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.default)(this,r)}}var l=function(e){(0,i.default)(r,e);var t=a(r);function r(){return(0,n.default)(this,r),t.call(this,"/roles")}return r}(r(27427).default)},66103:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(29826),i=function(e){e.directive("role",n.default)};window.Vue&&(window.role=n.default,Vue.use(i)),n.default.install=i;const o=n.default},29826:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});r(5212),r(26699),r(32023);var n=r(98088);const i={inserted:function(e,t,r){var i=t.value,o=n.default.getters&&n.default.getters.roles;if(!(i&&i instanceof Array&&i.length>0))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");var s=i;o.some((function(e){return s.includes(e)}))||e.parentNode&&e.parentNode.removeChild(e)}}},33687:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});r(26699),r(32023),r(5212);var n=r(98088);function i(e){if(e&&e instanceof Array&&e.length>0){var t=n.default.getters&&n.default.getters.permissions,r=n.default.getters&&n.default.getters.roles,i=e;return!!r.includes(n.default.state.settings.superAdmin)||t.some((function(e){return i.includes(e)}))}return console.error("Need permissions! Like v-permission=\"['manage permission','edit article']\""),!1}},34097:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});r(5212),r(26699),r(32023);var n=r(98088);function i(e){if(e&&e instanceof Array&&e.length>0){var t=n.default.getters&&n.default.getters.roles,r=e;return!!t.some((function(e){return r.includes(e)}))}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}},76438:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});r(9653);var n=r(77854);const i={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:25},pageSizes:{type:Array,default:function(){return[10,25,50,100]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1},scrollTo:{type:Number,default:0}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&(0,n.scrollTo)(this.scrollTo,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&(0,n.scrollTo)(this.scrollTo,800)}}}},82278:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});r(47042),r(41539),r(91038),r(78783),r(32165),r(66992),r(33948),r(79753),r(47941),r(38880),r(49337),r(33321),r(69070);var n=r(96156),i=r(92137),o=r(87757),s=r.n(o),a=(r(69826),r(5212),r(68309),r(89554),r(54747),r(23157),r(21249),r(19601),r(92222),r(82526),r(41817),r(34553),r(40561),r(57327),r(26470)),l=r.n(a),u=r(76670),c=r(44370),f=r(78644),d=r(66103),m=r(33687),p=r(34097),h=r(78524),g=r(2667);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var P=new c.default,R=new u.default;const k={components:{Pagination:h.default},directives:{permission:f.default,role:d.default},data:function(){return{loading:!1,loadingPermission:!1,currentRoleId:0,permissionId:0,dialogUpdateRoleVisible:!1,dialogCreateRoleVisible:!1,dialogCreatePermissionVisible:!1,routes:[],roles:[],permissions:[],menuPermissions:[],otherPermissions:[],permissionProps:{children:"children",label:"name",disabled:"disabled"},formRole:{name:"",description:""},formPermission:{name:"",description:""},query:{page:1,limit:25,keyword:""},total:0}},computed:{superAdmin:function(){return this.$store.state.settings.superAdmin},currentRole:function(){var e=this,t=this.roles.find((function(t){return t.id===e.currentRoleId}));return void 0===t?{name:"",permissions:[]}:t},rolePermissions:function(){return this.classifyPermissions(this.currentRole.permissions).all},roleMenuPermissions:function(){return this.classifyPermissions(this.currentRole.permissions).menu},roleOtherPermissions:function(){return this.classifyPermissions(this.currentRole.permissions).other},routesData:function(){return this.routes},roleRules:function(){var e=this;return{name:[{validator:function(t,r,n){return r?e.roles.some((function(t){return t.name===r&&t.id!==e.currentRoleId}))?n(new Error("Role exist!")):void n():n(new Error(e.$t("validation.required",{attribute:"Role"})))},trigger:["blur","change"]}]}},permissionRules:function(){var e=this;return{name:[{validator:function(t,r,n){return r?e.permissions.some((function(t){return t.name===r&&t.id!==e.permissionId}))?n(new Error("Permission exist!")):void n():n(new Error(e.$t("validation.required",{attribute:"Permission"})))},trigger:["blur","change"]}]}}},created:function(){this.getRoles(),this.getPermissions(),this.getRoutes()},methods:{checkPermission:m.default,checkRole:p.default,getRoutes:function(){var e=this;return(0,i.default)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.routes=e.generateRoutes(g.asyncRouterMap);case 1:case"end":return t.stop()}}),t)})))()},generateRoutes:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=[],i=b(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(!o.hidden){var s=this.onlyOneShowingChild(o.children,o);o.children&&s&&!o.alwaysShow&&(o=s);var a={path:l().resolve(r,o.path),name:o.meta&&o.meta.title};o.children&&(a.children=this.generateRoutes(o.children,a.path)),n.push(a)}}}catch(e){i.e(e)}finally{i.f()}return n},getRoles:function(){var e=this;this.loading=!0,R.list().then((function(t){e.roles=t.data.data,e.loading=!1}))},getPermissions:function(){var e=this;this.loadingPermission=!0,P.list(this.query).then((function(t){var r=t.data.data,n=e.classifyPermissions(r),i=n.all,o=n.menu,s=n.other;e.total=t.data.meta.total,e.permissions=i,e.menuPermissions=o,e.otherPermissions=s,e.loadingPermission=!1}))},classifyPermissions:function(e){var t=this,r=[],n=[],i=[];return e.forEach((function(e){var o=e.name;r.push(e),o.startsWith("view menu")?n.push(t.normalizeMenuPermission(e)):i.push(t.normalizePermission(e))})),{all:r,menu:n,other:i}},normalizeMenuPermission:function(e){return{id:e.id,name:e.name.substring(10)}},normalizePermission:function(e){return{id:e.id,name:e.name,disabled:!(0,p.default)([this.superAdmin])&&"manage permission"===e.name}},permissionKeys:function(e){return e.map((function(e){return e.id}))},permissionName:function(e){return e.map((function(e){return e.name}))},handleEditRolePermissions:function(e){var t=this;this.resetFormRole(),this.dialogUpdateRoleVisible=!0,this.currentRoleId=e,this.formRole=Object.assign({},this.currentRole),this.$nextTick((function(){t.$refs.menuPermissions.setCheckedKeys(t.permissionName(t.roleMenuPermissions)),t.$refs.otherPermissions.setCheckedKeys(t.permissionKeys(t.roleOtherPermissions))}))},updateRolePermission:function(e){var t=this,r={menu:this.$refs.menuPermissions.getCheckedKeys(),other:this.$refs.otherPermissions.getCheckedKeys()};this.$refs[e].validate((function(e){e&&R.update(t.currentRole.id,{permissions:r,role:t.formRole}).then((function(e){t.$message({message:"Role "+t.$t("messages.update"),type:"success",duration:5e3}),t.dialogUpdateRoleVisible=!1,t.getRoles(),t.getPermissions()}))}))},showCreateRole:function(){this.resetFormRole(),this.dialogCreateRoleVisible=!0},createRole:function(e){var t=this;this.$refs[e].validate((function(r){r&&R.store(t.formRole).then((function(r){var n=r.data.data;t.roles.push(n),t.$notify({title:t.$t("messages.update"),dangerouslyUseHTMLString:!0,message:"\n                  <div>Role name: ".concat(t.formRole.name,"</div>\n                  <div>Description: ").concat(t.formRole.description,"</div>\n                "),type:"success"}),t.$refs[e].resetFields()}))}))},handleDeleteRole:function(e,t){var r=this;this.$confirm(this.$t("messages.delete_confirm",{attribute:"[".concat(t,"]")}),this.$t("messages.warning"),{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){R.destroy(e).then((function(t){var n=r.roles.findIndex((function(t){return t.id===e}));r.roles.splice(n,1),r.$notify({title:"Success",message:r.$t("messages.delete"),type:"success"})}))}))},showCreatePermission:function(){this.dialogCreatePermissionVisible=!0,this.permissionId=0,this.resetFormPermission()},createPermission:function(e){var t=this;this.$refs[e].validate((function(r){r&&P.store(t.formPermission).then((function(){t.$notify({title:t.$t("messages.update"),dangerouslyUseHTMLString:!0,message:"\n                  <div>Role name: ".concat(t.formPermission.name,"</div>\n                  <div>Description: ").concat(t.formPermission.description,"</div>\n                "),type:"success"}),t.getPermissions(),t.$refs[e].resetFields()}))}))},handleDeletePermission:function(e,t){var r=this;this.$confirm(this.$t("messages.delete_confirm",{attribute:"[".concat(t,"]")}),this.$t("messages.warning"),{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){P.destroy(e).then((function(){r.$notify({title:"Success",message:r.$t("messages.delete"),type:"success"}),r.getPermissions()}))}))},handleEditPermissions:function(e){this.permissionId=e,this.dialogCreatePermissionVisible=!0;var t=this.permissions.find((function(t){return t.id===e}));this.formPermission=Object.assign({},t)},updatePermission:function(e){var t=this;this.$refs[e].validate((function(e){e&&P.update(t.permissionId,t.formPermission).then((function(){t.$message({message:"Permissions "+t.$t("messages.update"),type:"success",duration:5e3}),t.dialogCreatePermissionVisible=!1,t.getPermissions()}))}))},onlyOneShowingChild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=null,n=e.filter((function(e){return!e.hidden}));return 1===n.length?((r=n[0]).path=l().resolve(t.path,r.path),r):0===n.length&&(r=y(y({},t),{},{path:"",noShowingChildren:!0}))},resetFormRole:function(){this.formRole={name:"",description:""}},resetFormPermission:function(){this.formPermission={name:"",description:""}}}}},27065:(e,t,r)=>{"use strict";var n=r(13099),i=r(70111),o=[].slice,s={},a=function(e,t,r){if(!(t in s)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";s[t]=Function("C,a","return new C("+n.join(",")+")")}return s[t](e,r)};e.exports=Function.bind||function(e){var t=n(this),r=o.call(arguments,1),s=function(){var n=r.concat(o.call(arguments));return this instanceof s?a(t,n.length,n):t.apply(e,n)};return i(t.prototype)&&(s.prototype=t.prototype),s}},34553:(e,t,r)=>{"use strict";var n=r(82109),i=r(42092).findIndex,o=r(51223),s="findIndex",a=!0;s in[]&&Array(1).findIndex((function(){a=!1})),n({target:"Array",proto:!0,forced:a},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)},69826:(e,t,r)=>{"use strict";var n=r(82109),i=r(42092).find,o=r(51223),s="find",a=!0;s in[]&&Array(1).find((function(){a=!1})),n({target:"Array",proto:!0,forced:a},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)},12419:(e,t,r)=>{var n=r(82109),i=r(35005),o=r(13099),s=r(19670),a=r(70111),l=r(70030),u=r(27065),c=r(47293),f=i("Reflect","construct"),d=c((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),m=!c((function(){f((function(){}))})),p=d||m;n({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){o(e),s(t);var r=arguments.length<3?e:o(arguments[2]);if(m&&!d)return f(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(u.apply(e,n))}var i=r.prototype,c=l(a(i)?i:Object.prototype),p=Function.apply.call(e,c,t);return a(p)?p:c}})},1523:(e,t,r)=>{(t=r(23645)(!1)).push([e.id,".pagination-container[data-v-7df6c2c4]{background:#fff;overflow-x:auto;padding:32px 16px}.pagination-container[data-v-7df6c2c4]  .el-input{width:120px}.pagination-container.hidden[data-v-7df6c2c4]{display:none}",""]),e.exports=t},26470:(e,t,r)=>{"use strict";var n=r(34155);function i(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,t){for(var r,n="",i=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",i=0):i=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),o=a,s=0;continue}}else if(2===n.length||1===n.length){n="",i=0,o=a,s=0;continue}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(o+1,a):n=e.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===r&&-1!==s?++s:s=-1}return n}var s={resolve:function(){for(var e,t="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var a;s>=0?a=arguments[s]:(void 0===e&&(e=n.cwd()),a=e),i(a),0!==a.length&&(t=a+"/"+t,r=47===a.charCodeAt(0))}return t=o(t,!r),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(i(e),0===e.length)return".";var t=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=o(e,!t)).length||t||(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return i(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];i(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":s.normalize(e)},relative:function(e,t){if(i(e),i(t),e===t)return"";if((e=s.resolve(e))===(t=s.resolve(t)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var n=e.length,o=n-r,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var l=t.length-a,u=o<l?o:l,c=-1,f=0;f<=u;++f){if(f===u){if(l>u){if(47===t.charCodeAt(a+f))return t.slice(a+f+1);if(0===f)return t.slice(a+f)}else o>u&&(47===e.charCodeAt(r+f)?c=f:0===f&&(c=0));break}var d=e.charCodeAt(r+f);if(d!==t.charCodeAt(a+f))break;47===d&&(c=f)}var m="";for(f=r+c+1;f<=n;++f)f!==n&&47!==e.charCodeAt(f)||(0===m.length?m+="..":m+="/..");return m.length>0?m+t.slice(a+c):(a+=c,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(i(e),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"//":e.slice(0,n)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');i(e);var r,n=0,o=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,l=-1;for(r=e.length-1;r>=0;--r){var u=e.charCodeAt(r);if(47===u){if(!s){n=r+1;break}}else-1===l&&(s=!1,l=r+1),a>=0&&(u===t.charCodeAt(a)?-1==--a&&(o=r):(a=-1,o=l))}return n===o?o=l:-1===o&&(o=e.length),e.slice(n,o)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!s){n=r+1;break}}else-1===o&&(s=!1,o=r+1);return-1===o?"":e.slice(n,o)},extname:function(e){i(e);for(var t=-1,r=0,n=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47!==l)-1===n&&(o=!1,n=a+1),46===l?-1===t?t=a:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){r=a+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+e+n:n}("/",e)},parse:function(e){i(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var r,n=e.charCodeAt(0),o=47===n;o?(t.root="/",r=1):r=0;for(var s=-1,a=0,l=-1,u=!0,c=e.length-1,f=0;c>=r;--c)if(47!==(n=e.charCodeAt(c)))-1===l&&(u=!1,l=c+1),46===n?-1===s?s=c:1!==f&&(f=1):-1!==s&&(f=-1);else if(!u){a=c+1;break}return-1===s||-1===l||0===f||1===f&&s===l-1&&s===a+1?-1!==l&&(t.base=t.name=0===a&&o?e.slice(1,l):e.slice(a,l)):(0===a&&o?(t.name=e.slice(1,s),t.base=e.slice(1,l)):(t.name=e.slice(a,s),t.base=e.slice(a,l)),t.ext=e.slice(s,l)),a>0?t.dir=e.slice(0,a-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,e.exports=s},69968:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var n=r(93379),i=r.n(n),o=r(7795),s=r.n(o),a=r(90569),l=r.n(a),u=r(3565),c=r.n(u),f=r(19216),d=r.n(f),m=r(44589),p=r.n(m),h=r(1523),g=r.n(h),v={};for(const e in h)"default"!==e&&(v[e]=()=>h[e]);r.d(t,v);var y={};y.styleTagTransform=p(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=d();i()(g(),y);const b=g()&&g().locals?g().locals:void 0},78524:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(60672),i=r(61108),o={};for(const e in i)"default"!==e&&(o[e]=()=>i[e]);r.d(t,o);r(68572);const s=(0,r(51900).default)(i.default,n.render,n.staticRenderFns,!1,null,"7df6c2c4",null).exports},77585:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(60710),i=r(1724),o={};for(const e in i)"default"!==e&&(o[e]=()=>i[e]);r.d(t,o);const s=(0,r(51900).default)(i.default,n.render,n.staticRenderFns,!1,null,null,null).exports},61108:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(76438),i={};for(const e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i);const o=n.default},1724:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(82278),i={};for(const e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i);const o=n.default},68572:(e,t,r)=>{"use strict";r.r(t);var n=r(69968),i={};for(const e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i)},60672:(e,t,r)=>{"use strict";r.r(t);var n=r(37573),i={};for(const e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i)},60710:(e,t,r)=>{"use strict";r.r(t);var n=r(94550),i={};for(const e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i)},37573:(e,t,r)=>{"use strict";r.r(t),r.d(t,{render:()=>n,staticRenderFns:()=>i});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[r("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[]},94550:(e,t,r)=>{"use strict";r.r(t),r.d(t,{render:()=>n,staticRenderFns:()=>i});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",[r("el-col",{attrs:{span:24}},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("h3",[e._v(e._s(e.$t("route.role_permission")))])]),e._v(" "),r("div",{staticClass:"tw-text-right tw-mb-8"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.showCreateRole()}}},[e._v("Role")])],1),e._v(" "),r("div",[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"highlight-current-row":"",fit:"",border:"",data:e.roles}},[r("el-table-column",{attrs:{type:"index",align:"center",label:e.$t("table.rolePermission.id"),width:"50px"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:e.$t("table.rolePermission.name")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n              "+e._s(r.name)+"\n            ")]}}])}),e._v(" "),r("el-table-column",{attrs:{"header-align":"center",label:e.$t("table.rolePermission.description")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n              "+e._s(r.description)+"\n            ")]}}])}),e._v(" "),e.checkPermission(["manage permission"])?r("el-table-column",{attrs:{align:"center",label:"Actions"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.name===e.superAdmin&&e.checkRole([e.superAdmin])?r("div",[r("el-button",{attrs:{type:"success",round:"",icon:"el-icon-view",size:"small"},on:{click:function(t){return e.handleEditRolePermissions(n.id)}}})],1):e._e(),e._v(" "),n.name!==e.superAdmin?r("div",{staticClass:"tw-flex tw-flex-wrap tw-justify-center"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(t){return e.handleEditRolePermissions(n.id)}}}),e._v(" "),r("el-button",{staticClass:"tw-ml-0 md:tw-ml-4",attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(t){return e.handleDeleteRole(n.id,n.name)}}})],1):e._e()]}}],null,!1,3552102101)}):e._e()],1),e._v(" "),r("div",{staticClass:"tw-my-8 tw-text-right"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.showCreatePermission()}}},[e._v("Permission")])],1),e._v(" "),r("el-input",{staticClass:"tw-w-64 tw-mb-4",attrs:{placeholder:e.$t("table.rolePermission.name")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getPermissions.apply(null,arguments)}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}}),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"highlight-current-row":"",fit:"",border:"",data:e.permissions}},[r("el-table-column",{attrs:{type:"index",align:"center",label:e.$t("table.rolePermission.id"),width:"50px"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:e.$t("table.rolePermission.name")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n              "+e._s(r.name)+"\n            ")]}}])}),e._v(" "),r("el-table-column",{attrs:{"header-align":"center",label:e.$t("table.rolePermission.description")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n              "+e._s(r.description)+"\n            ")]}}])}),e._v(" "),e.checkPermission(["manage permission"])?r("el-table-column",{attrs:{align:"center",label:"Actions"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return"manage permission"!==n.name?[r("div",{staticClass:"tw-flex tw-flex-wrap tw-justify-center"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(t){return e.handleEditPermissions(n.id)}}}),e._v(" "),r("el-button",{staticClass:"tw-ml-0 md:tw-ml-4",attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(t){return e.handleDeletePermission(n.id,n.name)}}})],1)]:void 0}}],null,!0)}):e._e()],1),e._v(" "),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.getPermissions}}),e._v(" "),r("el-dialog",{attrs:{title:"["+e.currentRole.name+"] Edit Permission",visible:e.dialogUpdateRoleVisible,center:""},on:{"update:visible":function(t){e.dialogUpdateRoleVisible=t}}},[r("div",[r("el-form",{ref:"formRole",attrs:{model:e.formRole,rules:e.roleRules,"label-width":"110px","label-position":"left"}},[r("el-form-item",{attrs:{required:"",label:"Role name",prop:"name"}},[r("el-input",{attrs:{autofocus:""},model:{value:e.formRole.name,callback:function(t){e.$set(e.formRole,"name",t)},expression:"formRole.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Description",prop:"description"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.formRole.description,callback:function(t){e.$set(e.formRole,"description",t)},expression:"formRole.description"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"tw-flex tw-justify-between tw-items-start"},[r("el-form",{staticClass:"tw-w-6/12",attrs:{model:e.currentRole,"label-width":"80px","label-position":"top"}},[r("el-form-item",{attrs:{label:"Menus"}},[r("el-tree",{ref:"menuPermissions",staticClass:"permission-tree",attrs:{data:e.routesData,props:e.permissionProps,"default-checked-keys":e.permissionName(e.roleMenuPermissions),"show-checkbox":"","node-key":"name"}})],1)],1),e._v(" "),r("el-form",{staticClass:"tw-w-6/12",attrs:{model:e.currentRole,"label-width":"80px","label-position":"top"}},[r("el-form-item",{attrs:{label:"Permissions"}},[r("el-tree",{ref:"otherPermissions",staticClass:"permission-tree",attrs:{data:e.otherPermissions,"default-checked-keys":e.permissionKeys(e.roleOtherPermissions),props:e.permissionProps,"show-checkbox":"","node-key":"id"}})],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogUpdateRoleVisible=!1}}},[e._v("Cancel")]),e._v(" "),e.currentRole.name!==e.superAdmin?r("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:function(t){return e.updateRolePermission("formRole")}}},[e._v("\n              "+e._s(e.$t("button.update"))+"\n            ")]):e._e()],1)]),e._v(" "),r("el-dialog",{attrs:{title:"Create role",visible:e.dialogCreateRoleVisible,center:""},on:{"update:visible":function(t){e.dialogCreateRoleVisible=t}}},[r("div",{staticClass:"tw-flex tw-justify-between tw-items-start"},[r("el-form",{ref:"formRole",attrs:{model:e.formRole,rules:e.roleRules,"label-width":"110px","label-position":"left"}},[r("el-form-item",{attrs:{required:"",label:"Role name",error:e.errors.name&&e.errors.name[0],prop:"name"}},[r("el-input",{attrs:{autofocus:"",placeholder:"Ex: admin"},model:{value:e.formRole.name,callback:function(t){e.$set(e.formRole,"name",t)},expression:"formRole.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Description",prop:"description"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.formRole.description,callback:function(t){e.$set(e.formRole,"description",t)},expression:"formRole.description"}})],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogCreateRoleVisible=!1}}},[e._v("Cancel")]),e._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.createRole("formRole")}}},[e._v("\n              "+e._s(e.$t("button.create"))+"\n            ")])],1)]),e._v(" "),r("el-dialog",{attrs:{title:"Create permission",visible:e.dialogCreatePermissionVisible,center:""},on:{"update:visible":function(t){e.dialogCreatePermissionVisible=t}}},[r("div",[r("el-form",{ref:"formPermission",attrs:{model:e.formPermission,rules:e.permissionRules,"label-width":"110px","label-position":"left"}},[r("el-form-item",{attrs:{required:"",label:"Permission",error:e.errors.name&&e.errors.name[0],prop:"name"}},[r("el-input",{attrs:{autofocus:"",placeholder:"Ex: role_permission"},model:{value:e.formPermission.name,callback:function(t){e.$set(e.formPermission,"name",t)},expression:"formPermission.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Description",prop:"description"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.formPermission.description,callback:function(t){e.$set(e.formPermission,"description",t)},expression:"formPermission.description"}})],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogCreatePermissionVisible=!1}}},[e._v("Cancel")]),e._v(" "),0==+e.permissionId?r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.createPermission("formPermission")}}},[e._v("\n              "+e._s(e.$t("button.create"))+"\n            ")]):r("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:function(t){return e.updatePermission("formPermission")}}},[e._v("\n              "+e._s(e.$t("button.update"))+"\n            ")])],1)])],1)])],1)],1)},i=[]}}]);