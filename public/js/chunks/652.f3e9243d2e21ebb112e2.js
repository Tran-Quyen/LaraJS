(self.webpackChunk=self.webpackChunk||[]).push([[652],{63349:(t,e,r)=>{"use strict";function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}r.r(e),r.d(e,{default:()=>o})},6610:(t,e,r)=>{"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.r(e),r.d(e,{default:()=>o})},5991:(t,e,r)=>{"use strict";function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}r.r(e),r.d(e,{default:()=>n})},77608:(t,e,r)=>{"use strict";function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r.r(e),r.d(e,{default:()=>o})},10379:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var o=r(14665);function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&(0,o.default)(t,e)}},46070:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var o=r(90484),n=r(63349);function a(t,e){return!e||"object"!==(0,o.default)(e)&&"function"!=typeof e?(0,n.default)(t):e}},14665:(t,e,r)=>{"use strict";function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}r.r(e),r.d(e,{default:()=>o})},53812:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});const o={name:"PreCodeTag",props:{content:{type:String,required:!1,default:""}}}},42654:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>u});r(68309),r(26699),r(32023),r(92222);var o=r(83020),n=r(46550),a=r(68929),i=r.n(a),s=r(42933),l=r.n(s),c=new n.default;const u={components:{PreCodeTag:o.default},data:function(){return{loading:!1,loadingModel:!1,loadingDisplay:!1,dialogVisible:!1,options:["Search","Sort","Show"],relationshipOptions:["hasOne","hasMany","belongsToMany"],modelOptions:[],markdown:"# Relationship",displayColumns:[],displayColumns2:[],form:{model_current:"",relationship:"",model:"",column:"",column2:"",options:["Search","Sort","Show"]},drawDiagram:[]}},mounted:function(){var t=this,e=this.$route.params.id;e&&c.get(e).then((function(e){var r=e.data.data.model,o=JSON.parse(r);t.form.model_current=o.name,t.loadingModel=!0,c.getModels(r).then((function(e){t.loadingModel=!1;var r=e.data.data;t.modelOptions=r})).catch((function(){t.loadingModel=!1}))}))},methods:{diagram:function(){var t=this;c.generateDiagram(this.form.model_current).then((function(e){var r=e.data.data;t.drawDiagram=r}))},changeOptions:function(t){t.includes("Show")?"belongsToMany"===this.form.relationship?this.options=["Show","Search"]:this.options=["Search","Sort","Show"]:(this.form.options=[],this.options=["Show"])},createRelationship:function(){var t=this;this.loading=!0,c.generateRelationship(this.form).then((function(e){t.$message({showClose:!0,message:t.$t("messages.success"),type:"success"}),t.loading=!1,location.reload()})).catch((function(){t.loading=!1}))},replaceTemplate:function(t){var e=this,r="# Model ".concat(this.form.model_current,"\n      public function ").concat(i()(this.form.model),"() {\n        return $this->").concat(this.form.relationship,"(").concat(this.form.model,"::class);\n      }"),o="<br/>  # Model ".concat(this.form.model,"\n      public function ").concat(i()(this.form.model_current),"() {\n        return $this->belongsTo(").concat(this.form.model_current,"::class);\n      }");"belongsToMany"===this.form.relationship&&(o="<br/>  # Model ".concat(this.form.model,"\n      public function ").concat(i()(this.form.model_current),"() {\n        return $this->belongsToMany(").concat(this.form.model_current,"::class);\n      }"),o+="<br/>  # I will create a table ".concat(l()(this.form.model_current),"_").concat(l()(this.form.model))),this.form.relationship&&this.form.model&&(this.markdown=r.concat(o)),"belongsToMany"===this.form.relationship?(this.options=["Show","Search"],this.form.options=["Show","Search"]):(this.options=["Search","Sort","Show"],this.form.options=["Search","Sort","Show"]),t&&(this.loadingDisplay=!0,c.getColumns(this.form.model_current).then((function(t){e.loadingDisplay=!1;var r=t.data.data;e.displayColumns=r})).catch((function(){e.loadingDisplay=!1})),c.getColumns(this.form.model).then((function(t){e.loadingDisplay=!1;var r=t.data.data;e.displayColumns2=r})).catch((function(){e.loadingDisplay=!1})))}}}},46550:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>u});r(12419);var o=r(6610),n=r(5991),a=r(10379),i=r(46070),s=r(77608),l=r(58123);function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=(0,s.default)(t);if(e){var n=(0,s.default)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return(0,i.default)(this,r)}}var u=function(t){(0,a.default)(r,t);var e=c(r);function r(){return(0,o.default)(this,r),e.call(this,"generators")}return(0,n.default)(r,[{key:"checkModel",value:function(t){return(0,l.default)({url:"/generators/check-model",method:"get",params:{name:t}})}},{key:"checkColumn",value:function(t,e){return(0,l.default)({url:"/generators/check-column",method:"get",params:{table:t,column:e}})}},{key:"getModels",value:function(t){return(0,l.default)({url:"/generators/get-models",method:"get",params:{model:t}})}},{key:"getColumns",value:function(t){return(0,l.default)({url:"/generators/get-columns",method:"get",params:{table:t}})}},{key:"generateRelationship",value:function(t){return(0,l.default)({url:"/generators/relationship",method:"post",data:t})}},{key:"generateDiagram",value:function(t){return(0,l.default)({url:"/generators/diagram",method:"get",params:{model:t}})}}]),r}(r(53200).default)},53200:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});var o=r(6610),n=r(5991),a=r(58123),i=function(){function t(e){(0,o.default)(this,t),this.uri=e}return(0,n.default)(t,[{key:"list",value:function(t){return(0,a.default)({url:this.uri,method:"get",params:t})}},{key:"get",value:function(t){return(0,a.default)({url:this.uri+"/"+t,method:"get"})}},{key:"store",value:function(t){return(0,a.default)({url:this.uri,method:"post",data:t})}},{key:"update",value:function(t,e){return(0,a.default)({url:this.uri+"/"+t,method:"put",data:e})}},{key:"destroy",value:function(t){return(0,a.default)({url:this.uri+"/"+t,method:"delete"})}}]),t}()},27065:(t,e,r)=>{"use strict";var o=r(13099),n=r(70111),a=[].slice,i={},s=function(t,e,r){if(!(e in i)){for(var o=[],n=0;n<e;n++)o[n]="a["+n+"]";i[e]=Function("C,a","return new C("+o.join(",")+")")}return i[e](t,r)};t.exports=Function.bind||function(t){var e=o(this),r=a.call(arguments,1),i=function(){var o=r.concat(a.call(arguments));return this instanceof i?s(e,o.length,o):e.apply(t,o)};return n(e.prototype)&&(i.prototype=e.prototype),i}},12419:(t,e,r)=>{var o=r(82109),n=r(35005),a=r(13099),i=r(19670),s=r(70111),l=r(70030),c=r(27065),u=r(47293),d=n("Reflect","construct"),f=u((function(){function t(){}return!(d((function(){}),[],t)instanceof t)})),p=!u((function(){d((function(){}))})),h=f||p;o({target:"Reflect",stat:!0,forced:h,sham:h},{construct:function(t,e){a(t),i(e);var r=arguments.length<3?t:a(arguments[2]);if(p&&!f)return d(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var o=[null];return o.push.apply(o,e),new(c.apply(t,o))}var n=r.prototype,u=l(s(n)?n:Object.prototype),h=Function.apply.call(t,u,e);return s(h)?h:u}})},26729:(t,e,r)=>{(e=r(23645)(!1)).push([t.id,"pre[data-v-cfa23f46]{font-size:1.5rem;width:60vw;max-width:700px;border:1px solid grey;border-left:12px solid #67c23a;border-radius:5px;padding:14px;white-space:pre;word-wrap:break-word;overflow:auto}pre code[data-v-cfa23f46]{font-family:Inconsolata,Monaco,Consolas,Andale Mono,Bitstream Vera Sans Mono,Courier New,Courier,monospace;color:#dd6b20}",""]),t.exports=e},27594:(t,e,r)=>{(e=r(23645)(!1)).push([t.id,'.w-04-rem[data-v-3c8ff6e7]{width:.4rem}.draw-arrow-down[data-v-3c8ff6e7]{position:relative}.draw-arrow-down[data-v-3c8ff6e7]:before{content:"";position:absolute;bottom:-1rem;right:-.3rem;width:0;height:0;border-left:.5rem solid transparent;border-right:.5rem solid transparent;border-top:1.9rem solid #5a67d8}.error-danger[data-v-3c8ff6e7] input{border-color:#ff3860!important}.options[data-v-3c8ff6e7]{width:260px}.one[data-v-3c8ff6e7]:after{content:"1"}.one[data-v-3c8ff6e7]:after,.two[data-v-3c8ff6e7]:after{background-color:#5a67d8;position:absolute;top:14px;left:-8px;color:#fff;width:20px;height:20px;border-radius:100%;text-align:center;line-height:20px}.two[data-v-3c8ff6e7]:after{content:"2"}.three[data-v-3c8ff6e7]:after{content:"3"}.four[data-v-3c8ff6e7]:after,.three[data-v-3c8ff6e7]:after{background-color:#5a67d8;position:absolute;top:14px;left:-8px;color:#fff;width:20px;height:20px;border-radius:100%;text-align:center;line-height:20px}.four[data-v-3c8ff6e7]:after{content:"4"}.five[data-v-3c8ff6e7]:after{content:"5"}.five[data-v-3c8ff6e7]:after,.six[data-v-3c8ff6e7]:after{background-color:#5a67d8;position:absolute;top:14px;left:-8px;color:#fff;width:20px;height:20px;border-radius:100%;text-align:center;line-height:20px}.six[data-v-3c8ff6e7]:after{content:"6"}.equivalent[data-v-3c8ff6e7]:after{content:"";position:absolute;top:-1rem;right:-.3rem;width:0;height:0;border-left:.5rem solid transparent;border-right:.5rem solid transparent;border-bottom:1.9rem solid #5a67d8}',""]),t.exports=e},42933:(t,e,r)=>{var o=r(35393)((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));t.exports=o},87028:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>l});var o=r(93379),n=r.n(o),a=r(26729),i=r.n(a),s={insert:"head",singleton:!1};n()(i(),s);const l=i().locals||{}},10569:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>l});var o=r(93379),n=r.n(o),a=r(27594),i=r.n(a),s={insert:"head",singleton:!1};n()(i(),s);const l=i().locals||{}},83020:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});var o=r(73053),n=r(44516),a={};for(const t in n)"default"!==t&&(a[t]=()=>n[t]);r.d(e,a);r(94149);const i=(0,r(51900).default)(n.default,o.render,o.staticRenderFns,!1,null,"cfa23f46",null).exports},62652:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});var o=r(99148),n=r(82631),a={};for(const t in n)"default"!==t&&(a[t]=()=>n[t]);r.d(e,a);r(21638);const i=(0,r(51900).default)(n.default,o.render,o.staticRenderFns,!1,null,"3c8ff6e7",null).exports},44516:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var o=r(53812),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);r.d(e,n);const a=o.default},82631:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var o=r(42654),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);r.d(e,n);const a=o.default},94149:(t,e,r)=>{"use strict";r.r(e);var o=r(87028),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);r.d(e,n)},21638:(t,e,r)=>{"use strict";r.r(e);var o=r(10569),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);r.d(e,n)},73053:(t,e,r)=>{"use strict";r.r(e);var o=r(35811),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);r.d(e,n)},99148:(t,e,r)=>{"use strict";r.r(e);var o=r(55979),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);r.d(e,n)},35811:(t,e,r)=>{"use strict";r.r(e),r.d(e,{render:()=>o,staticRenderFns:()=>n});var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("pre",{staticClass:"code code-php"},[t._v("  "),r("code",{domProps:{innerHTML:t._s(t.content)}}),t._v("\n")])},n=[]},55979:(t,e,r)=>{"use strict";r.r(e),r.d(e,{render:()=>o,staticRenderFns:()=>n});var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-row",[r("el-col",{attrs:{span:24}},[r("el-card",[r("div",{staticClass:"tw-text-center",attrs:{slot:"header"},slot:"header"},[r("button",{staticClass:"tw-hover:bg-green-600 tw-hover:text-white tw-font-bold tw-border tw-rounded tw-border-green-600 tw-text-green-600 tw-bg-transparent tw-py-3 tw-px-4",on:{click:function(e){t.dialogVisible=!0}}},[r("svg-icon",{attrs:{"icon-class":"tree"}})],1)]),t._v(" "),r("section",{staticClass:"section"},[r("div",{staticClass:"tw-flex tw-flex-col tw-items-center"},[r("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v("\n            "+t._s(t.form.model_current)+"\n          ")]),t._v(" "),r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down one"}),t._v(" "),r("el-select",{class:{"error-danger":t.errors.relationship},attrs:{placeholder:"Relationship"},on:{change:function(e){return t.replaceTemplate("")}},model:{value:t.form.relationship,callback:function(e){t.$set(t.form,"relationship",e)},expression:"form.relationship"}},t._l(t.relationshipOptions,(function(t,e){return r("el-option",{key:"relationship_"+e,attrs:{label:t,value:t}})})),1),t._v(" "),t.errors.relationship?r("p",{staticClass:"help is-danger tw-text-lg"},[t._v("\n            "+t._s(t.errors.relationship[0])+"\n          ")]):t._e(),t._v(" "),r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down two"}),t._v(" "),r("el-select",{class:{"error-danger":t.errors.model},attrs:{loading:t.loadingModel,filterable:"",placeholder:"Model"},on:{change:function(e){return t.replaceTemplate("display")}},model:{value:t.form.model,callback:function(e){t.$set(t.form,"model",e)},expression:"form.model"}},t._l(t.modelOptions,(function(t,e){return r("el-option",{key:"model_"+e,attrs:{label:t,value:t}})})),1),t._v(" "),t.errors.model?r("p",{staticClass:"help is-danger tw-text-lg"},[t._v("\n            "+t._s(t.errors.model[0])+"\n          ")]):t._e(),t._v(" "),r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down three"}),t._v(" "),r("div",{staticClass:"z-10"},[r("pre-code-tag",{attrs:{content:t.markdown}})],1),t._v(" "),r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down four"}),t._v(" "),r("el-select",{staticClass:"z-10",class:{"error-danger":t.errors.column},attrs:{loading:t.loadingDisplay,filterable:"",placeholder:"Display Column"},model:{value:t.form.column,callback:function(e){t.$set(t.form,"column",e)},expression:"form.column"}},t._l(t.displayColumns,(function(t,e){return r("el-option",{key:"col_"+e,attrs:{label:t,value:t}})})),1),t._v(" "),"belongsToMany"===t.form.relationship?[r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down equivalent"}),t._v(" "),r("el-select",{class:{"error-danger":t.errors.column2},attrs:{loading:t.loadingDisplay,filterable:"",placeholder:"Display Column 2"},model:{value:t.form.column2,callback:function(e){t.$set(t.form,"column2",e)},expression:"form.column2"}},t._l(t.displayColumns2,(function(t,e){return r("el-option",{key:"col_"+e,attrs:{label:t,value:t}})})),1)]:t._e(),t._v(" "),t.errors.column?r("p",{staticClass:"help is-danger tw-text-lg"},[t._v("\n            "+t._s(t.errors.column[0])+"\n          ")]):t._e(),t._v(" "),r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down five"}),t._v(" "),r("el-select",{staticClass:"options",attrs:{multiple:"",placeholder:"Options"},on:{change:function(e){return t.changeOptions(t.form.options)}},model:{value:t.form.options,callback:function(e){t.$set(t.form,"options",e)},expression:"form.options"}},t._l(t.options,(function(t,e){return r("el-option",{key:"option_"+e,attrs:{label:t,value:t}})})),1),t._v(" "),r("div",{staticClass:"w-04-rem tw-h-24 tw-bg-indigo-600 draw-arrow-down six"}),t._v(" "),r("el-tooltip",{attrs:{effect:"dark",content:t.$t("route.generator_relationship"),placement:"bottom"}},[r("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"z-10",attrs:{type:"success",icon:"el-icon-check",circle:""},on:{click:function(e){return e.preventDefault(),t.createRelationship()}}})],1)],2),t._v(" "),r("div",{staticClass:"container is-fullhd"},[r("el-dialog",{attrs:{visible:t.dialogVisible,fullscreen:!0},on:{"update:visible":function(e){t.dialogVisible=e},open:t.diagram}},[r("div",{staticClass:"tw-text-center",attrs:{slot:"title"},slot:"title"},[r("h3",{staticClass:"title"},[t._v("\n                Diagram "+t._s(t.$t("route.generator_relationship"))+"\n              ")])]),t._v(" "),r("div",[r("div",{staticClass:"tree tw-text-center"},[r("ul",{staticClass:"tw-inline-block"},t._l(t.drawDiagram,(function(e,o){return r("li",{key:"diagram_"+o},[r("a",[t._v(t._s(e.model))]),t._v(" "),r("ul",{staticClass:"tw-flex"},t._l(e.data,(function(e,o){return r("li",{key:"itemDiagram_"+o},[r("a",[t._v(t._s(e.type))]),t._v(" "),r("ul",[r("li",[r("a",{staticClass:"tw-w-64"},[t._v(t._s(e.model))]),t._v(" "),e.table?r("ul",{class:{"has-mtm-parent":e.table}},[r("a",{staticClass:"tw-w-64"},[t._v(t._s(e.table))])]):t._e(),t._v(" "),r("ul",[r("li",[r("a",{class:{"has-mtm":e.table}},[t._v("\n                                  "+t._s(e.foreign_key)+"\n                                ")])]),t._v(" "),r("li",[r("a",{class:{"has-mtm":e.table}},[t._v("\n                                  "+t._s(e.local_key)+"\n                                ")])])])])])])})),0)])})),0)])])])],1)])])],1)],1)},n=[]}}]);