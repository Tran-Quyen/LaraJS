(self.webpackChunk=self.webpackChunk||[]).push([[856],{895:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});r(34553);const n={name:"ScrollPane",data:function(){return{left:0}},computed:{scrollWrapper:function(){return this.$refs.scrollContainer.$refs.wrap}},methods:{handleScroll:function(e){var t=e.wheelDelta||40*-e.deltaY,r=this.scrollWrapper;r.scrollLeft=r.scrollLeft+t/4},moveToTarget:function(e){var t=this.$refs.scrollContainer.$el.offsetWidth,r=this.scrollWrapper,n=this.$parent.$refs.tag,i=null,a=null;if(n.length>0&&(i=n[0],a=n[n.length-1]),i===e)r.scrollLeft=0;else if(a===e)r.scrollLeft=r.scrollWidth-t;else{var s=n.findIndex((function(t){return t===e})),o=n[s-1],l=n[s+1],c=l.$el.offsetLeft+l.$el.offsetWidth+4,f=o.$el.offsetLeft-4;c>r.scrollLeft+t?r.scrollLeft=c-t:f<r.scrollLeft&&(r.scrollLeft=f)}}}}},51119:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});r(82526),r(41817),r(32165),r(92222),r(57327),r(89554),r(91038),r(79753),r(66992),r(47042),r(5212),r(83710),r(68309),r(33321),r(69070),r(38880),r(49337),r(47941),r(41539),r(74916),r(39714),r(78783),r(15306),r(54747),r(33948);var n=r(319),i=r.n(n),a=r(59713),s=r.n(a),o=r(13151),l=r(44252),c=r(26470),f=r.n(c);function u(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const v={components:{ScrollPane:o.default},data:function(){return{visible:!1,top:0,left:0,selectedTag:{},affixTags:[]}},computed:{visitedViews:function(){return this.$store.state.tagsView.visitedViews.filter((function(e){if(!e.meta.tagsView)return e}))},routes:function(){return this.$store.state.permission.routers}},watch:{$route:function(){this.addTags(),this.moveToCurrentTag()},visible:function(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted:function(){this.initTags(),this.addTags()},methods:{generateTitleHaveId:l.generateTitleHaveId,isActive:function(e){return e.path===this.$route.path},filterAffixTags:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=[];return e.forEach((function(e){if(e.meta&&e.meta.affix){var a=f().resolve(r,e.path);n.push({fullPath:a,path:a,name:e.name,meta:p({},e.meta)})}if(e.children){var s=t.filterAffixTags(e.children,e.path);s.length>=1&&(n=[].concat(i()(n),i()(s)))}})),n},initTags:function(){var e,t=u(this.affixTags=this.filterAffixTags(this.routes));try{for(t.s();!(e=t.n()).done;){var r=e.value;r.name&&this.$store.dispatch("tagsView/addVisitedView",r)}}catch(e){t.e(e)}finally{t.f()}},addTags:function(){return this.$route.name&&this.$store.dispatch("tagsView/addView",this.$route),!1},moveToCurrentTag:function(){var e=this,t=this.$refs.tag;this.$nextTick((function(){var r,n=u(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(i.to.path===e.$route.path){e.$refs.scrollPane.moveToTarget(i),i.to.fullPath!==e.$route.fullPath&&e.$store.dispatch("tagsView/updateVisitedView",e.$route);break}}}catch(e){n.e(e)}finally{n.f()}}))},refreshSelectedTag:function(e){var t=this;this.$store.dispatch("tagsView/delCachedView",e).then((function(){var r=e.fullPath;t.$nextTick((function(){t.$router.replace({path:"/redirect"+r})}))}))},closeSelectedTag:function(e){var t=this;this.$store.dispatch("tagsView/delView",e).then((function(r){var n=r.visitedViews;t.isActive(e)&&t.toLastView(n,e)}))},closeOthersTags:function(){var e=this;this.$router.push(this.selectedTag),this.$store.dispatch("tagsView/delOthersViews",this.selectedTag).then((function(){e.moveToCurrentTag()}))},closeAllTags:function(e){var t=this;this.$store.dispatch("tagsView/delAllViews").then((function(r){var n=r.visitedViews;t.affixTags.some((function(t){return t.path===e.path}))||t.toLastView(n,e)}))},toLastView:function(e,t){var r=e.slice(-1)[0];r?this.$router.push(r):"Dashboard"===t.name?this.$router.replace({path:"/redirect"+t.fullPath}):this.$router.push("/")},openMenu:function(e,t){var r=this.$el.getBoundingClientRect().left,n=this.$el.offsetWidth-105,i=t.clientX-r+15;this.left=i>n?n:i,this.top=t.clientY,this.visible=!0,this.selectedTag=e},closeMenu:function(){this.visible=!1}}}},34553:(e,t,r)=>{"use strict";var n=r(82109),i=r(42092).findIndex,a=r(51223),s=r(29207),o="findIndex",l=!0,c=s(o);o in[]&&Array(1).findIndex((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!c},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a(o)},42647:(e,t,r)=>{(t=r(23645)(!1)).push([e.id,".scroll-container[data-v-c24dea68]{white-space:nowrap;position:relative;overflow:hidden;width:100%}.scroll-container[data-v-c24dea68]  .el-scrollbar__bar{bottom:0}.scroll-container[data-v-c24dea68]  .el-scrollbar__wrap{height:49px}",""]),e.exports=t},87412:(e,t,r)=>{(t=r(23645)(!1)).push([e.id,'.tags-view-container[data-v-2941e5fb]{height:34px;width:100%;background:#fff;border-bottom:1px solid #d8dce5;box-shadow:0 1px 3px 0 rgba(0,0,0,.12),0 0 3px 0 rgba(0,0,0,.04)}.tags-view-container .tags-view-wrapper .tags-view-item[data-v-2941e5fb]{display:inline-block;position:relative;cursor:pointer;height:26px;line-height:26px;border:1px solid #d8dce5;color:#495060;background:#fff;padding:0 8px;font-size:12px;margin-left:5px;margin-top:4px}.tags-view-container .tags-view-wrapper .tags-view-item[data-v-2941e5fb]:first-of-type{margin-left:15px}.tags-view-container .tags-view-wrapper .tags-view-item[data-v-2941e5fb]:last-of-type{margin-right:15px}.tags-view-container .tags-view-wrapper .tags-view-item.active[data-v-2941e5fb]{background-color:#42b983;color:#fff;border-color:#42b983}.tags-view-container .tags-view-wrapper .tags-view-item.active[data-v-2941e5fb]:before{content:"";background:#fff;display:inline-block;width:8px;height:8px;border-radius:50%;position:relative;margin-right:2px}.tags-view-container .contextmenu[data-v-2941e5fb]{margin:0;background:#fff;z-index:3000;position:absolute;list-style-type:none;padding:5px 0;border-radius:4px;font-size:12px;font-weight:400;color:#333;box-shadow:2px 2px 3px 0 rgba(0,0,0,.3)}.tags-view-container .contextmenu li[data-v-2941e5fb]{margin:0;padding:7px 16px;cursor:pointer}.tags-view-container .contextmenu li[data-v-2941e5fb]:hover{background:#eee}',""]),e.exports=t},7820:(e,t,r)=>{(t=r(23645)(!1)).push([e.id,".tags-view-wrapper .tags-view-item .el-icon-close{width:16px;height:16px;vertical-align:2px;border-radius:50%;text-align:center;transition:all .3s cubic-bezier(.645,.045,.355,1);transform-origin:100% 50%}.tags-view-wrapper .tags-view-item .el-icon-close:before{transform:scale(.6);display:inline-block;vertical-align:-3px}.tags-view-wrapper .tags-view-item .el-icon-close:hover{background-color:#b4bccc;color:#fff}",""]),e.exports=t},71694:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(93379),i=r.n(n),a=r(42647),s=r.n(a),o={insert:"head",singleton:!1};i()(s(),o);const l=s().locals||{}},97109:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(93379),i=r.n(n),a=r(87412),s=r.n(a),o={insert:"head",singleton:!1};i()(s(),o);const l=s().locals||{}},84141:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(93379),i=r.n(n),a=r(7820),s=r.n(a),o={insert:"head",singleton:!1};i()(s(),o);const l=s().locals||{}},13151:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(70630),i=r(86550),a={};for(const e in i)"default"!==e&&(a[e]=()=>i[e]);r.d(t,a);r(28305);const s=(0,r(51900).default)(i.default,n.render,n.staticRenderFns,!1,null,"c24dea68",null).exports},62620:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(83686),i=r(67094),a={};for(const e in i)"default"!==e&&(a[e]=()=>i[e]);r.d(t,a);r(8922),r(14131);const s=(0,r(51900).default)(i.default,n.render,n.staticRenderFns,!1,null,"2941e5fb",null).exports},86550:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(895),i={};for(const e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i);const a=n.default},67094:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(51119),i={};for(const e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i);const a=n.default},28305:(e,t,r)=>{"use strict";r.r(t);var n=r(71694),i={};for(const e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i)},8922:(e,t,r)=>{"use strict";r.r(t);var n=r(97109),i={};for(const e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i)},14131:(e,t,r)=>{"use strict";r.r(t);var n=r(84141),i={};for(const e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i)},70630:(e,t,r)=>{"use strict";r.r(t);var n=r(30991),i={};for(const e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i)},83686:(e,t,r)=>{"use strict";r.r(t);var n=r(76936),i={};for(const e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i)},30991:(e,t,r)=>{"use strict";r.r(t),r.d(t,{render:()=>n,staticRenderFns:()=>i});var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-scrollbar",{ref:"scrollContainer",staticClass:"scroll-container",attrs:{vertical:!1},nativeOn:{wheel:function(t){return t.preventDefault(),e.handleScroll(t)}}},[e._t("default")],2)},i=[]},76936:(e,t,r)=>{"use strict";r.r(t),r.d(t,{render:()=>n,staticRenderFns:()=>i});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tags-view-container",attrs:{id:"tags-view-container"}},[r("scroll-pane",{ref:"scrollPane",staticClass:"tags-view-wrapper"},e._l(e.visitedViews,(function(t){return r("router-link",{key:t.path,ref:"tag",refInFor:!0,staticClass:"tags-view-item",attrs:{to:{path:t.path,query:t.query,fullPath:t.fullPath},tag:"span",exact:""},nativeOn:{mouseup:function(r){return"button"in r&&1!==r.button?null:e.closeSelectedTag(t)},contextmenu:function(r){return r.preventDefault(),e.openMenu(t,r)}}},[e._v("\n      "+e._s(e.generateTitleHaveId(t))+"\n      "),t.meta.affix?e._e():r("span",{staticClass:"el-icon-close",on:{click:function(r){return r.preventDefault(),r.stopPropagation(),e.closeSelectedTag(t)}}})])})),1),e._v(" "),r("ul",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"contextmenu",style:{left:e.left+"px",top:e.top+"px"}},[r("li",{on:{click:function(t){return e.refreshSelectedTag(e.selectedTag)}}},[e._v("\n      "+e._s(e.$t("tagsView.refresh"))+"\n    ")]),e._v(" "),e.selectedTag.meta&&e.selectedTag.meta.affix?e._e():r("li",{on:{click:function(t){return e.closeSelectedTag(e.selectedTag)}}},[e._v("\n      "+e._s(e.$t("tagsView.close"))+"\n    ")]),e._v(" "),r("li",{on:{click:e.closeOthersTags}},[e._v(e._s(e.$t("tagsView.closeOthers")))]),e._v(" "),r("li",{on:{click:function(t){return e.closeAllTags(e.selectedTag)}}},[e._v(e._s(e.$t("tagsView.closeAll")))])])],1)},i=[]}}]);